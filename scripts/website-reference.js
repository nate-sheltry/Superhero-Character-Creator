function strStartsWith(e,a){
    return 0===e.indexOf(a)
}
function strEndsWith(e,a){
    return e.match(a+"$")==a
}
function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=a.exec(location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function getSPECIAL(e,a){var t="",o=-1;if(isNaN(e)){switch(e){case"Strength":o=0;break;case"Perception":o=1;break;case"Endurance":o=2;break;case"Charisma":o=3;break;case"Intelligence":o=4;break;case"Agility":o=5;break;case"Luck":o=6}t=e}else switch(o=e){case 0:t="Strength";break;case 1:t="Perception";break;case 2:t="Endurance";break;case 3:t="Charisma";break;case 4:t="Intelligence";break;case 5:t="Agility";break;case 6:t="Luck"}var n=pSPECIAL[o];if(!a)for(var r in pLevelData){var s=pLevelData[r].Perks;for(var i in s)s[i]==t&&n++;var l=pLevelData[r].Bobbleheads;for(h in l)l[h]==t&&n++;var d=pLevelData[r].Books;for(b in d)strStartsWith(d[b],"You're S.P.E.C.I.A.L.")&&strEndsWith(d[b],t)&&n++}return n}function getMaxSPECIAL(){var e=pMaxSPECIAL;return e}function updateSPECIAL(){for(var e=0,a=0;a<pSPECIAL.length;a++){var t=getSPECIAL(a);$(".special-value:eq("+a+")").text(t),e+=t}pRemainingAttributes=getMaxSPECIAL()-e,$("#remaining-attributes").html(pRemainingAttributes);var o=getPerkPointsRemaining();$("#cs-player-perks-remaining-value").html(o),$("#cs-player-perks-remaining").toggleClass("cs-player-perks-remaining-disabled",0==o)}function getPerkFilename(e){if(-1!=$.inArray(e,specialKeys))return"img/fo4-perk-"+e.toLowerCase()+"-00-special.png";var a=String(pid[e][1]);a.length<2&&(a="0"+a);var t=e.replace(/[.!:,']/g,"").replace(/ /g,"-").toLowerCase(),o=pid[e][0].toLowerCase();return"img/fo4-perk-"+o+"-"+a+"-"+t+".png"}function printLevelData(){console.log("printLevelData::BEGIN");for(var e in pLevelData){var a=pLevelData[e].Perks,t="pLevelData["+e+"]['Perks'] = ";if(void 0===a)t+="undefined";else{t+="[ ";var o=!1;for(var n in a)t+=a[n],t+=", ",o=!0;o&&(t=t.substr(0,t.length-2)),t+=" ]"}console.log(t)}console.log("printLevelData::END")}function printRedoStack(){console.log("printRedoStack::BEGIN");for(var e in pRedoStack){for(var a="REDO ENTRY["+e+"] = [ ",t=pRedoStack[e],o=0;o<t.length;o++){var n=t[o];if($.isArray(n)){a+="[ ";for(var r=0;r<n.length;r++)$.isNumeric(n[r])||(a+="'"),a+=n[r],$.isNumeric(n[r])||(a+="'"),r+1<n.length&&(a+=", ");a+=0==n.length?"]":" ]"}else $.isNumeric(n)||(a+="'"),a+=n,$.isNumeric(n)||(a+="'");o+1<t.length&&(a+=", ")}a+=0==t.length?"]":" ]",console.log(a)}console.log("printRedoStack::BEGIN")}function printEventLog(){console.log("printEventLog::BEGIN");for(var e in pEventLog){for(var a="EVENT LOG ENTRY["+e+"] = [ ",t=pEventLog[e],o=0;o<t.length;o++){var n=t[o];if($.isArray(n)){a+="[ ";for(var r=0;r<n.length;r++)$.isNumeric(n[r])||(a+="'"),a+=n[r],$.isNumeric(n[r])||(a+="'"),r+1<n.length&&(a+=", ");a+=0==n.length?"]":" ]"}else $.isNumeric(n)||(a+="'"),a+=n,$.isNumeric(n)||(a+="'");o+1<t.length&&(a+=", ")}a+=0==t.length?"]":" ]",console.log(a)}console.log("printEventLog::BEGIN")}function loadFOB(e,a,t){var o="",n=e;if("Special"==e)o="special",n="img/fo4-fob-"+a.substring(0,3).toLowerCase()+".png";else if("CharacterSheet"==e){switch(t){case"SPECIAL":o="cs-player",n="img/fo4-fob-"+a.substring(0,3).toLowerCase()+".png";break;case"Trait":o="cs-traits";break;case"Perk":o="cs-perks",n=getPerkFilename(a);break;case"Implant":o="cs-implants";break;case"Book":o="cs-books";var r="";r=strStartsWith(a,"You're S.P.E.C.I.A.L.")?"youre-special":a.replace(/[.!:,']/g,"").replace(/[&]/g,"and").replace(/ /g,"-").toLowerCase(),n="img/fo4-book-"+r+".png";break;case"Bobblehead":o="cs-bobbleheads";var s=a.replace(/[.!:,']/g,"").replace(/ /g,"-").toLowerCase();n="img/fo4-bobblehead-"+s+".png"}fobPrefix=t}else if("Book"==e){o="books";var r="";r=strStartsWith(a,"You're S.P.E.C.I.A.L.")?"youre-special":a.replace(/[.!:,']/g,"").replace(/[&]/g,"and").replace(/ /g,"-").toLowerCase(),n="img/fo4-book-"+r+".png"}else if("Bobblehead"==e){o="bobbleheads";var s=a.replace(/[.!:,']/g,"").replace(/ /g,"-").toLowerCase();n="img/fo4-bobblehead-"+s+".png"}var i="CharacterSheet"==e?"cs":o;if($("#"+o+"-fob").html('<span class="img-center-helper"></span><img class="'+i+'-fob-img" src="'+n+'">'),"CharacterSheet"==e&&"Perk"==t){for(var l=a,d=getPerkMaxRank(l),c=getPlayerPerkRank(l),p="",h=0;d>h;h++)p+="<img class='cs-perk-star' src='img/fo4-star-"+(c>h?"filled.png'/>":"empty.png'/>");$("#cs-perks-stars").html(p)}}function updateButtonStates(){pCreated||($("#name").val().length>0&&0==pRemainingAttributes?$("#next-button").removeClass("button-disabled"):$("#next-button").addClass("button-disabled")),$("#name").val().length>0||pRemainingAttributes+pBaseSPECIAL<getMaxSPECIAL()||pLevel>1?$("#reset-button").removeClass("button-disabled"):$("#reset-button").addClass("button-disabled");var e=getPerkPointsRemaining();if(0==e?$("#spend-perks-button").addClass("button-disabled"):$("#spend-perks-button").removeClass("button-disabled"),pEventLog.length>0){var a=pEventLog[pEventLog.length-1],t=(a[0],a[1]);a[2],a[3],a[4],a[5];t.match("^c-")?($("#undo-button").addClass("button-disabled"),$("#undo-button").html("Undo")):($("#undo-button").removeClass("button-disabled"),"l"==t||t.match("^l-")?"l-perk"==t&&pEventLog.length-2>=0&&"l"!=pEventLog[pEventLog.length-2][1]?$("#undo-button").html("Undo Perk"):$("#undo-button").html("Undo Level Up"):"b"==t?$("#undo-button").html("Undo Book"):"i"==t?$("#undo-button").html("Undo Implant"):"h"==t&&$("#undo-button").html("Undo Bobblehead"))}if(0==pRedoStack.length)$("#redo-button").addClass("button-disabled"),$("#redo-button").html("Redo");else{$("#redo-button").removeClass("button-disabled");var o=pRedoStack[pRedoStack.length-1][1];"l"==o||o.match("^l-")?"l-perk"==o&&pEventLog.length-2>=0&&"l"!=pEventLog[pEventLog.length-1][1]?$("#redo-button").html("Redo Perk"):$("#redo-button").html("Redo Level Up"):"b"==o?$("#redo-button").html("Redo Book"):"i"==o?$("#redo-button").html("Redo Implant"):"h"==o&&$("#redo-button").html("Redo Bobblehead")}}function finalizePlayerCreation(){pCreated=!0,pPerkChartViewMode=1,$("#special-gender").hide(),$("#bf-creation").hide(),$("#bf-main").show(),$("#remaining-attributes").hide(),$("#remaining-attributes-label").hide(),$(".special-button-add").hide(),$(".special-button-subtract").hide(),$("#name").attr("readonly","true"),$("#event-log-heading").html($("#name").val().toUpperCase());for(var e=[],a=0;7>a;a++)e.push(getSPECIAL(a));addLogEntry(1,"c-gender",[pGender],"GENDER:",pGender,0,0),addLogEntry(1,"c-special",[e],"SPECIAL:","ST: "+getSPECIAL(0)+", PE: "+getSPECIAL(1)+", EN: "+getSPECIAL(2)+", CH: "+getSPECIAL(3)+", IN: "+getSPECIAL(4)+", AG: "+getSPECIAL(5)+", LU: "+getSPECIAL(6),0,0),updatePage(),setTimeout(function(){$("#cs-info-panel").fadeIn(400),$("#event-log-heading").fadeIn(400),$("#event-log-content-wrapper").fadeIn(400)},200),pLevelData[pLevel]={},pLevelData[pLevel].Perks=[],pLevelData[pLevel].Books=[],pLevelData[pLevel].Bobbleheads=[]}function finalizeLevelUp(e,a,t){if(t){var o=!1,n=!1;for(pe in pEventLog){if(o)break;pEventLog[pe][0]==pLevel&&"l"!=pEventLog[pe][1]&&(o=!0,"l-perk-saved"==pEventLog[pe][1]&&(pEventLog.splice(pe,1),pLevelData[pLevel].Perks.shift(),$("#event-log-content").find('.event[data-level="'+pLevel+'"]:eq(2)').remove(),n=!0))}var r=$(".lu-perk-selected"),s=r.hasClass("lu-perk-header");s?n?pLevelData[pLevel].Perks.unshift(r.data("attribute")):pLevelData[pLevel].Perks.push(r.data("attribute")):(l=getPlayerPerkRank(r.data("perk-id")),n?pLevelData[pLevel].Perks.unshift(r.data("perk-id")):pLevelData[pLevel].Perks.push(r.data("perk-id"))),d=s?r.data("attribute"):r.data("perk-id");var i=getPerkMaxRank(d),l=getPlayerPerkRank(d);addLogEntry(pLevel,"l-perk",pLevelData[pLevel].Perks,"PERK:",d,l,i,n),$(".lu-perk-selected").removeClass("lu-perk-selected")}else if(addLogEntry(pLevel,"l",[],"","Player Advanced to Level "+pLevel,0,0),a)addLogEntry(pLevel,"l-perk-saved",[],"","Player Saved Perk Point! Perks Points available: "+getPerkPointsRemaining(),0,0),pLevelData[pLevel].Perks.push("perk-saved");else{var d="";if(e)for(var c in pLevelData[pLevel].Perks){var d=pLevelData[pLevel].Perks[c];if("perk-saved"==d)addLogEntry(pLevel,"l-perk-saved",[],"","Player Saved Perk Point! Perks Points available: "+getPerkPointsRemaining(),0,0);else{var i=getPerkMaxRank(d),l=getPlayerPerkRank(d);addLogEntry(pLevel,"l-perk",pLevelData[pLevel].Perks,"PERK:",d,l,i)}}else{var r=$(".lu-perk-selected"),s=r.hasClass("lu-perk-header");s?pLevelData[pLevel].Perks.push(r.data("attribute")):(l=getPlayerPerkRank(r.data("perk-id")),pLevelData[pLevel].Perks.push(r.data("perk-id"))),d=s?r.data("attribute"):r.data("perk-id");var i=getPerkMaxRank(d),l=getPlayerPerkRank(d);addLogEntry(pLevel,"l-perk",pLevelData[pLevel].Perks,"PERK:",d,l,i),$(".lu-perk-selected").removeClass("lu-perk-selected")}}pRedoStack=[],updatePage()}function addLogEntry(e,a,t,o,n,r,s,i){if(i){var l=!1,d=-1;for(var c in pEventLog){if(d++,l)break;pEventLog[c][0]==pLevel&&"l"!=pEventLog[c][1]&&(pEventLog.splice(d,0,[e,a,t,o,n,r,s]),l=!0)}}else pEventLog.push([e,a,t,o,n,r,s]);var p="l"==a?" event-level-heading":"";"l"==a&&$("#event-log-content").append("<DIV class='event event-spacer' data-level='"+e+"'><DIV class='event-type' data-reference='"+a+"'></DIV><DIV class='event-level'>&nbsp;</DIV><DIV class='event-detail'>&nbsp;</DIV></DIV>");for(var h="",g=0;s>g;g++)h+="<img class='event-detail-star' src='img/fo4-star-"+(r>g?"filled.png'/>":"empty.png'/>");h.length>0&&(h="<DIV class='event-detail-stars'>"+h+"</DIV>");var u="l"==a||"l-perk-saved"==a?"event-detail-full":"event-detail",k="l"==a||"l-perk-saved"==a?"event-detail-description-full":"event-detail-description",m="l"==a||"l-perk-saved"==a?"event-detail-value-full":"event-detail-value",b="<DIV class='event' data-level='"+e+"'><DIV class='event-type' data-reference='"+a+"'></DIV><DIV class='event-level'>"+e+"</DIV><DIV class='"+u+p+"'><DIV class='event-detail-label'>"+o+"</DIV><DIV class='"+m+"'>"+h+"<DIV class='"+k+"'>"+n+"</DIV></DIV></DIV>";i?$("DIV.event:not(.event-spacer)[data-level="+e+"]:first").after(b):$("#event-log-content").append(b)}function updatePage(){updateSPECIAL(),updateDerivedStatistics(),updateCharacterSheet(),updateButtonStates(),updateTips()}function getPerkPointsRemaining(){if(1==pLevel)return 0;var e=0;for(var a in pLevelData){var t=pLevelData[a].Perks;for(var o in t)"perk-saved"!=t[o]&&e++}var n=pLevel-1-e;return n}function updateCharacterSheet(){$("#cs-player-content").empty(),$("#cs-traits-content").empty(),$("#cs-perks-content").empty(),$("#cs-implants-content").empty(),$("#cs-books-content").empty(),$("#cs-bobbleheads-content").empty();var e=$("#name").val().toUpperCase();$("#cs-info-panel").find(".panel-top-legend").html(e+" (LEVEL "+pLevel+") <img src='img/fo4-gender-"+pGender.toLowerCase()+".png' style='height:17px;position:relative;top:3px;'>"),$("#cs-player-content").append('<DIV class="cs-hoverable cs-hoverable-large cs-hoverable-hover" data-reference="Strength" data-type="SPECIAL"><DIV class="cs-hoverable-label"><DIV class="cs-special-label">Strength</DIV><DIV class="cs-special-value">'+getSPECIAL(0)+"</DIV></DIV>"),$("#cs-player-content").append('<DIV class="cs-hoverable cs-hoverable-large" data-reference="Perception" data-type="SPECIAL"><DIV class="cs-hoverable-label"><DIV class="cs-special-label">Perception</DIV><DIV class="cs-special-value">'+getSPECIAL(1)+"</DIV></DIV>"),$("#cs-player-content").append('<DIV class="cs-hoverable cs-hoverable-large" data-reference="Endurance" data-type="SPECIAL"><DIV class="cs-hoverable-label"><DIV class="cs-special-label">Endurance</DIV><DIV class="cs-special-value">'+getSPECIAL(2)+"</DIV></DIV>"),$("#cs-player-content").append('<DIV class="cs-hoverable cs-hoverable-large" data-reference="Charisma" data-type="SPECIAL"><DIV class="cs-hoverable-label"><DIV class="cs-special-label">Charisma</DIV><DIV class="cs-special-value">'+getSPECIAL(3)+"</DIV></DIV>"),$("#cs-player-content").append('<DIV class="cs-hoverable cs-hoverable-large" data-reference="Intelligence" data-type="SPECIAL"><DIV class="cs-hoverable-label"><DIV class="cs-special-label">Intelligence</DIV><DIV class="cs-special-value">'+getSPECIAL(4)+"</DIV></DIV>"),$("#cs-player-content").append('<DIV class="cs-hoverable cs-hoverable-large" data-reference="Agility" data-type="SPECIAL"><DIV class="cs-hoverable-label"><DIV class="cs-special-label">Agility</DIV><DIV class="cs-special-value">'+getSPECIAL(5)+"</DIV></DIV>"),$("#cs-player-content").append('<DIV class="cs-hoverable cs-hoverable-large" data-reference="Luck" data-type="SPECIAL"><DIV class="cs-hoverable-label"><DIV class="cs-special-label">Luck</DIV><DIV class="cs-special-value">'+getSPECIAL(6)+"</DIV></DIV>"),loadFOB("CharacterSheet","Strength","SPECIAL"),$("#cs-player-description").html(sid.Strength);var a=[];if(pLevel>1){for(var t in pLevelData){var o=pLevelData[t].Perks;if(t>1)for(var t in o){var n=o[t];if("perk-saved"!=n&&n.length>0&&-1==$.inArray(n,a)){a.push(n);var r=(getPlayerPerkRank(n),getPerkMaxRank(n),n);$("#cs-perks-content").append('<DIV class="cs-hoverable cs-scrollable" data-reference="'+n+'" data-type="Perk"><DIV class="cs-hoverable-label">'+r+"</DIV></DIV>")}}}if(a.length>0){var s=a[0];$("#cs-perks-content > DIV:first").addClass("cs-hoverable-hover"),loadFOB("CharacterSheet",s,"Perk");var i=-1!=$.inArray(s,specialKeys)?sid[s]:pid[s][3][getPlayerPerkRank(s)-1];0==i.length&&(i="To be confirmed..."),$("#cs-perks-description").html(i),$("#cs-perks-content-wrapper").show(),$("#cs-perks-no-content").hide(),$("#cs-perks-information").show(),$("#cs-perks-stars").show(),$("#cs-perks-fob").show()}else $("#cs-perks-no-content").show(),$("#cs-perks-content-wrapper").hide(),$("#cs-perks-information").hide(),$("#cs-perks-stars").hide(),$("#cs-perks-fob").hide()}else $("#cs-perks-no-content").show(),$("#cs-perks-content-wrapper").hide(),$("#cs-perks-information").hide(),$("#cs-perks-stars").hide(),$("#cs-perks-fob").hide();var l=!1;for(var d in bid){var c=0;for(var p in pLevelData){var h=pLevelData[p].Books;for(var g in h)d==h[g]&&c++}c>0&&(l=!0,$("#cs-books-content").append('<DIV class="cs-hoverable cs-scrollable" data-reference="'+d+'" data-type="Book"><DIV class="cs-hoverable-label cs-book-entry">'+d+"</DIV></DIV>"))}if(l){var u=$("#cs-books-content > DIV:first").data("reference");$("#cs-books-content > DIV:first").addClass("cs-hoverable-hover"),loadFOB("CharacterSheet",u,"Book"),$("#cs-books-description-scroll").html(bid[u][1]);for(var k=getPlayerBooksRead(u),m=bid[u][0],b="",v=!0,y=0;m>y;y++)k>y?b+="<img data-idx='"+String(y+1)+"' class='book-star-filled' src='img/fo4-star-filled.png'/>":v&&(b+="<img data-idx='"+String(y+1)+"' class='book-star-empty' src='img/fo4-star-empty.png'/>");$("#cs-books-stars").html(b),$("#cs-books-content-wrapper").show(),$("#cs-books-no-content").hide(),$("#cs-books-information").show(),$("#cs-books-stars").show(),$("#cs-books-fob").show()}else $("#cs-books-no-content").show(),$("#cs-books-content-wrapper").hide(),$("#cs-books-information").hide(),$("#cs-books-stars").hide(),$("#cs-books-fob").hide();var f=!1;for(var P in hid){var I=0;for(var p in pLevelData){var L=pLevelData[p].Bobbleheads;for(var C in L)P==L[C]&&I++}I>0&&(f=!0,$("#cs-bobbleheads-content").append('<DIV class="cs-hoverable cs-scrollable" data-reference="'+P+'" data-type="Bobblehead"><DIV class="cs-hoverable-label cs-bobblehead-entry">'+P+"</DIV></DIV>"))}if(f){var w=$("#cs-bobbleheads-content > DIV:first").data("reference");$("#cs-bobbleheads-content > DIV:first").addClass("cs-hoverable-hover"),loadFOB("CharacterSheet",w,"Bobblehead");var R=hid[w][0];R+="<BR><BR>"+hid[w][1],$("#cs-bobbleheads-description").html(R),$("#cs-bobbleheads-content-wrapper").show(),$("#cs-bobbleheads-no-content").hide(),$("#cs-bobbleheads-information").show(),$("#cs-bobbleheads-fob").show()}else $("#cs-bobbleheads-no-content").show(),$("#cs-bobbleheads-content-wrapper").hide(),$("#cs-bobbleheads-information").hide(),$("#cs-bobbleheads-fob").hide()}function updateDerivedStatistics(){var e=getSPECIAL(0),a=(getSPECIAL(1),getSPECIAL(2)),t=(getSPECIAL(3),getSPECIAL(4),getSPECIAL(5)),o=(getSPECIAL(6),5*(getPlayerPerkRank("Bloody Mess")>3?3:getPlayerPerkRank("Bloody Mess"))),n=50*getPlayerPerkRank("Better Criticals"),r=60+10*t+(getPlayerBooksRead("Astoundingly Awesome Tales")>0?5:0);$("#ds-AP").html(r);var s=25*getPlayerPerkRank("Action Boy"),i=70+5*a+10*pLevel+20*getPlayerPerkRank("Life Giver"),l=200+10*e+25*(getPlayerPerkRank("Strong Back")>2?2:getPlayerPerkRank("Strong Back"))+50*(getPlayerPerkRank("Lone Wanderer")>2?2:getPlayerPerkRank("Lone Wanderer")),d=(getPlayerBooksRead("Astoundingly Awesome Tales")>0?1:0)+(3==getPlayerPerkRank("Life Giver")?1:0),c=getPlayerBooksRead("Astoundingly Awesome Tales")>0?5:0,p=(getPlayerBooksRead("Astoundingly Awesome Tales")>0?5:0)+10*getPlayerPerkRank("Rad Resistant"),h=1*getPlayerBooksRead("Unstoppables"),g=25*(getPlayerPerkRank("Rooted")>2?2:getPlayerPerkRank("Rooted"))+10*getPlayerPerkRank("Toughness"),u=getPlayerPerkRank("Lone Wanderer");1==u?g+=15:u>=2&&(g+=20);var k=3==u?25:0,m=10*getPlayerPerkRank("Refractor"),b=50*getPlayerPerkRank("Chem Resistant"),v=20*getPlayerPerkRank("Big Leagues")+25*(getPlayerPerkRank("Rooted")>2?2:getPlayerPerkRank("Rooted"))+k+o,y=5*getPlayerBooksRead("Grognak the Barbarian")+(getPlayerHasBobblehead("Melee")?25:0)+n,f=20*getPlayerPerkRank("Iron Fist")+25*(getPlayerPerkRank("Rooted")>2?2:getPlayerPerkRank("Rooted"))+k+o,P=5*getPlayerBooksRead("Grognak the Barbarian")+(getPlayerHasBobblehead("Unarmed")?25:0)+n,I=k+o,L=5*getPlayerBooksRead("Tesla Science Magazine")+(getPlayerHasBobblehead("Energy Weapons")?25:0)+n,C=20*getPlayerPerkRank("Heavy Gunner")+k+o,w=(getPlayerHasBobblehead("Big Guns")?25:0)+n,R=20*getPlayerPerkRank("Gunslinger")+k+o,S=20*getPlayerPerkRank("Rifleman")+k+o,D=20*getPlayerPerkRank("Commando")+k+o,A=5*getPlayerBooksRead("Guns & Bullets")+(getPlayerHasBobblehead("Small Guns")?25:0)+n,E=(getPlayerHasBobblehead("Explosives")?15:0)+25*getPlayerPerkRank("Demolition Expert")+k+o,B=5*getPlayerBooksRead("Tumblers Today")+(getPlayerHasBobblehead("Lockpicking")?10:0),V=25*getPlayerPerkRank("Pickpocket"),T=5*getPlayerBooksRead("U.S. Covert Operations Manual")+(getPlayerHasBobblehead("Sneak")?10:0);switch(getPlayerPerkRank("Sneak")){case 1:T+=20;break;case 2:T+=30;break;case 3:T+=40;break;case 4:case 5:T+=50}var x="";switch(getPlayerPerkRank("Locksmith")){case 0:x="Novice";break;case 1:x="Advanced";break;case 2:x="Expert";break;case 3:case 4:x="Master"}var M="";switch(getPlayerPerkRank("Hacker")){case 0:M="Novice";break;case 1:M="Advanced";break;case 2:M="Expert";break;case 3:case 4:M="Master"}var N=50*getPlayerPerkRank("Chemist"),W=5*getPlayerBooksRead("Tales of a Junktown Jerky Vendor")+(getPlayerHasBobblehead("Barter")?5:0)+25*(getPlayerPerkRank("Cap Collector")>2?2:getPlayerPerkRank("Cap Collector")),_=getPlayerHasBobblehead("Medicine")?10:0,Y=getPlayerHasBobblehead("Repair")?10:0,G=getPlayerPerkRank("Nuclear Physicist");switch(G){case 1:Y+=25;break;case 2:Y+=50;break;case 3:Y+=100}var H=getPlayerPerkRank("Gun Nut");0==H&&(H="Base");var O=getPlayerPerkRank("Blacksmith");0==O&&(O="Base");var U=getPlayerPerkRank("Armorer");0==U&&(U="Base");var K=getPlayerPerkRank("Science");0==K&&(K="Base"),$("#ds-AE").html(s+"%"),$("#ds-HP").html(i),$("#ds-CW").html(l+" lbs."),$("#ds-PR").html(c+"%"),$("#ds-RR").html(p+"%"),$("#ds-DA").html(h+"%"),$("#ds-MC").html(y+"%"),$("#ds-EC").html(L+"%"),$("#ds-UC").html(P+"%"),$("#ds-HC").html(w+"%"),$("#ds-BC").html(A+"%"),$("#ds-HR").html(d),$("#ds-ED").html(E+"%"),$("#ds-MW").html(v+"%"),$("#ds-UW").html(f+"%"),$("#ds-HW").html(C+"%"),$("#ds-DR").html(g+"%"),$("#ds-PP").html(V+"%"),$("#ds-ER").html(m+"%"),$("#ds-AR").html(b+"%"),$("#ds-BP").html(W+"%"),$("#ds-EW").html(I+"%"),$("#ds-LP").html(B+"%"),$("#ds-SH").html(_+"%"),$("#ds-FC").html(Y+"%"),$("#ds-BP").html(W+"%"),$("#ds-CD").html(N+"%"),$("#ds-PW").html(R+"%"),$("#ds-RW").html(S+"%"),$("#ds-AW").html(D+"%"),$("#ds-LL").html(x),$("#ds-TL").html(M),$("#ds-GM").html(H),$("#ds-HM").html(K),$("#ds-AM").html(U),$("#ds-MM").html(O)}function updateTips(){var e="";if(pCreated)if(1==pLevel)e="TIP_PRESS_LEVEL_UP";else{for(var a=["TIP_HOVER_DERIVED","TIP_CHANGE_NAME","TIP_REREGISTER","TIP_UNDO","TIP_READ_YOURE_SPECIAL","TIP_LONE_WANDERER","TIP_PERK_NEXT_PREV","TIP_PERK_SELECT_SPECIAL","TIP_NO_LEVEL_CAP","TIP_INTELLIGENCE_DUMB_LUCK","TIP_PERK_DISABLED","TIP_PERK_EXPORT","TIP_ASTOUNDING_TALES","TIP_WEP_DMG","TIP_WEP_CRIT","TIP_CARRY_WEIGHT","TIP_SCROUNGER"],t=Math.floor(Math.random()*a.length);a[t]==pCurrentTipId;)t=Math.floor(Math.random()*a.length);e=a[t]}else pRemainingAttributes>0&&0==$("#name").val().length?e="TIP_CREATE_NO_ATTR_NO_NAME":0==pRemainingAttributes&&0==$("#name").val().length?e="TIP_CREATE_HAS_ATTR_NO_NAME":0==pRemainingAttributes&&$("#name").val().length>0?e="TIP_CREATE_HAS_ATTR_HAS_NAME":pRemainingAttributes>0&&$("#name").val().length>0&&(e="TIP_CREATE_NO_ATTR_HAS_NAME");if(e.length>0&&pCurrentTipId!=e){if(tipText=tid[e],tipText.indexOf("#NAME#")>=0&&(tipText=tipText.replace("#NAME#",$("#name").val())),tipText.indexOf("#LASTACTION#")>=0){var o=pEventLog[pEventLog.length-1],n=o[1];"b"==n?(tipText=tipText.replace("#LASTACTION#","Book"),tipText=tipText.replace("#NEXTACTION#","unread that Book")):"h"==n?(tipText=tipText.replace("#LASTACTION#","Bobblehead"),tipText=tipText.replace("#NEXTACTION#","remove that Bobblehead")):n.match("^l-")&&(tipText=tipText.replace("#LASTACTION#","level up perk"),tipText=tipText.replace("#NEXTACTION#","de-level"))}pCurrentTipId=e,$("#tips-content-desc").fadeOut(200),setTimeout(function(){$("#tips-content-desc").html(tipText),$("#tips-content-desc").fadeIn(200)},200)}}function initializeLevelUp(){pLevel++,pLevelData[pLevel]={},pLevelData[pLevel].Perks=[],pLevelData[pLevel].Books=[],pLevelData[pLevel].Bobbleheads=[]}function getPlayerPerkRank(e){if(-1!=$.inArray(e,specialKeys))return getSPECIAL(e);var a=0;for(var t in pLevelData){var o=pLevelData[t].Perks;for(var t in o)o[t]==e&&a++}return a}function getPerkMaxRank(e){return"perk-saved"==e?0:-1!=$.inArray(e,specialKeys)?10:pid[e][2].length}function getPlayerBooksRead(e){var a=0;for(var t in pLevelData){var o=pLevelData[t].Books;for(var n in o)o[n]==e&&a++}return a}function getPlayerHasBobblehead(e){var a=!1;for(var t in pLevelData){var o=pLevelData[t].Bobbleheads;for(var n in o)if(o[n]==e){a=!0;break}}return a}function updatePerkInfoPanel(e,a){var t=e.hasClass("lu-perk-header"),o=t?e.data("attribute"):e.data("perk-id");if(t||!t&&void 0!==pid[o]){$("#lu-perk-info-title").html(o);var n=getPerkMaxRank(o),r=a?pCurrentRankDisplayed:getPlayerPerkRank(o),s=!1;if(t)$("#lu-perk-info-reqs").html(""),s=n>r;else{var i=void 0!==a&&a,l=i&&0!=pPerkChartViewMode&&e.hasClass("lu-perk-active")?r-1:r;if(n>l){s=!0;var d=pid[o][2][l],c="";d>1?(c="Level "+d,-1!=d&&d>pLevel&&0!=pPerkChartViewMode&&(c="<SPAN class='lu-perk-requirement-not-met'>"+c+"</SPAN>",s=!1),c+=", "):-1==d&&(c="Level ??, ");var p=pid[o][0];p=p.substring(0,3).toUpperCase();var h=pid[o][1],g=getSPECIAL(pid[o][0]),u=p+" "+h;if(h>g&&0!=pPerkChartViewMode&&(u="<SPAN class='lu-perk-requirement-not-met'>"+u+"</SPAN>",s=!1),!i&&0!=pPerkChartViewMode&&e.hasClass("lu-perk-active")&&!s){var k=l-1,m=pid[o][2][k];c="Level "+m+", "}var b="Requires: "+c+u;$("#lu-perk-info-reqs").html(b)}else $("#lu-perk-info-reqs").html("")}if(t)$("#lu-perk-info-desc").html(sid[e.data("attribute")]);else{var v=-1;v=r==pid[o][3].length?pid[o][3].length-1:0!=pPerkChartViewMode&&e.hasClass("lu-perk-active")?r-1:r;var y=pid[o][3][v];0==y.length&&(y="To be confirmed..."),$("#lu-perk-info-desc").html(y)}var f="";if(a||0==pPerkChartViewMode)if(0==pPerkChartViewMode&&t)f="";else for(var P=0;n>P;P++){var I=-1;I=a?0!=pPerkChartViewMode&&e.hasClass("lu-perk-active")?r:r+1:0!=pPerkChartViewMode&&s&&e.hasClass("lu-perk-available")?r:r+1,f+=I>P?"<img data-idx='"+String(P+1)+"' class='perk-rank-filled' src='img/fo4-star-filled.png'/>":"<img data-idx='"+String(P+1)+"' class='perk-rank-empty' src='img/fo4-star-empty.png'/>"}else{e.hasClass("lu-perk-selected")&&r++;for(var L=!0,P=0;n>P;P++)r>P?f+="<img data-idx='"+String(P+1)+"' class='perk-rank-filled' src='img/fo4-star-filled.png'/>":s&&L&&0==$(".lu-perk-selected").length?(f+="<DIV class='star-fill-animation perk-rank-empty' data-idx='"+String(P+1)+"'><img class='bottom' src='img/fo4-star-empty.png'/><img class='top' src='img/fo4-star-filled.png'/></DIV>",L=!1):f+="<img data-idx='"+String(P+1)+"' class='perk-rank-empty' src='img/fo4-star-empty.png'/>"}$("#lu-perk-info-rank").html(f)}}function getPlayerCanSelectPerk(e){var a=getPerkMaxRank(e),t=getPlayerPerkRank(e),o=!1;if(a>t){if(o=!0,-1!=$.inArray(e,specialKeys))return o;var n=pid[e][2][t];if(n>pLevel)o=!1;else{var r=pid[e][1],s=getSPECIAL(pid[e][0]);r>s&&(o=!1)}}return o}function updatePerkAvailability(){if(0==pPerkChartViewMode)return $(".lu-perk").toggleClass("lu-perk-unavailable",!1),$(".lu-perk").toggleClass("lu-perk-active",!0),$(".lu-perk").toggleClass("lu-perk-available",!0),$(".lu-perk").toggleClass("lu-perk-selectable",!1),$(".lu-perk-active-stars").remove(),$("#lu-perks-action-description").css("display","none"),$("#lu-perks-button-cancel").css("display","none"),$(".lu-perk-header-gold-stars").html(""),void $("#lu-perks-button-ok").button("enable");$(".lu-perk").toggleClass("lu-perk-unavailable",!1),$(".lu-perk").toggleClass("lu-perk-active",!1),$(".lu-perk").toggleClass("lu-perk-available",!1),$(".lu-perk").toggleClass("selectable",!1),$(".lu-perk").each(function(){var e=($(this).data("attribute"),Number($(this).data("level")),$(this).data("perk-id")),a=getPlayerPerkRank(e),t=getPerkMaxRank(e);a>0&&$(this).toggleClass("lu-perk-active",!0);var o=pid[e][0],n=pid[e][1],r=getSPECIAL(o);$(".lu-perk-header[data-attribute="+o+"]").hasClass("lu-perk-selected")&&r++,$(this).toggleClass("lu-perk-available",r>=n);var s=getPlayerCanSelectPerk(e);$(this).toggleClass("lu-perk-selectable",s),$(this).find(".lu-perk-active-stars:first").length>0&&$(this).find(".lu-perk-active-stars:first").remove();for(var i="",l=0;a>l;l++)i+="<img class='lu-perk-active-star-filled' src='img/fo4-star-filled-gold.png'>";$(this).hasClass("lu-perk-selected")&&(i+="<img class='lu-perk-active-star-filled' src='img/fo4-star-filled-gold.png'>"),t>a&&s&&(i+="<DIV class='star-fill-animation star-fill-gold'><img class='bottom' src='img/fo4-star-empty-gold.png'/><img class='top' src='img/fo4-star-filled-gold.png'/></DIV>"),i.length>0&&(i="<DIV class='lu-perk-active-stars'>"+i+"</DIV>",$(this).find(".lu-perk-image-wrapper:first").append(i)),$(this).toggleClass("lu-perk-requirements-met",s)}),$(".lu-perk-header").each(function(){for(var e="",a=getSPECIAL($(this).data("attribute")),t=0;a>t;t++)e+="<DIV class='star-fill-header'><img src='img/fo4-star-filled-gold.png'/></DIV>";$(this).hasClass("lu-perk-selected")&&(e+="<DIV class='star-fill-header'><img src='img/fo4-star-filled-gold.png'/></DIV>"),getPlayerCanSelectPerk($(this).data("attribute"))&&0==$(".lu-perk-selected").length&&(e+="<DIV class='star-fill-animation star-fill-gold star-fill-header-animation'><img class='bottom' src='img/fo4-star-empty-gold.png'/><img class='top' src='img/fo4-star-filled-gold.png'/></DIV>"),$(this).find(".lu-perk-header-gold-stars:first").html(e)});var e=$(".lu-perk-selected:first");e.length>0?(e.hasClass("lu-perk-header")?$("#lu-perks-action-description").html("PERK: "+e.data("attribute").toUpperCase()):$("#lu-perks-action-description").html("PERK: "+e.data("perk-id").toUpperCase()),$("#lu-perks-button-ok").button("enable"),$("#lu-perks-button-save").button("disable")):($("#lu-perks-action-description").html("CHOOSE 1 PERK"),$("#lu-perks-button-ok").button("disable"),$("#lu-perks-button-save").button("enable")),$("#lu-perks-action-description").css("display","inline-block"),$("#lu-perks-button-cancel").css("display","")}function redoEvent(){var e=pRedoStack.pop(),a=e[0],t=e[1],o=e[2],n=e[3],r=e[4],s=e[5],i=e[6];if("b"==t){var l=o[0];pLevelData[pLevel].Books.push(l),addLogEntry(pLevel,"b",[l],n,r,s,i)}else if("h"==t){var d=o[0];pLevelData[pLevel].Bobbleheads.push(d),addLogEntry(pLevel,"h",[d],n,r,s,i)}else if("l"==t)for(pLevel=a,pLevelData[pLevel]={},pLevelData[pLevel].Perks=[],pLevelData[pLevel].Books=[],pLevelData[pLevel].Bobbleheads=[],addLogEntry(pLevel,"l",[],n,r);0!=pRedoStack.length;){var c=pRedoStack[pRedoStack.length-1],p=c[0],h=c[1];if(pLevel==p&&h.match("^l-")){e=pRedoStack.pop(),a=e[0],t=e[1],o=e[2],n=e[3],r=e[4],s=e[5],i=e[6],"l-perk"==t?(pLevelData[pLevel].Perks.push(r),addLogEntry(pLevel,"l-perk",o,n,r,s,i)):"l-perk-saved"==t&&(pLevelData[pLevel].Perks.push("perk-saved"),addLogEntry(pLevel,"l-perk-saved",o,"","Player Saved Perk Point! Perks Points available: "+getPerkPointsRemaining(),0,0));break}}else"l-perk"==t&&(pLevelData[pLevel].Perks.push(r),addLogEntry(pLevel,"l-perk",o,n,r,s,i));updatePage()}function getMapKeyIndex(e,a){var t=0;for(var o in e){if(o==a)return t;t++}return-1}function getMapIndexKey(e,a){var t=0;for(var o in e){if(a==t)return o;t++}return""}var sid={};sid.Name="Tell us about yourself! Vault-Tec needs to know what kind of citizen you are to ensure your future happiness.",sid.Strength="Strength is a measure of your raw physical power. It affects how much you can carry, and the damage of all melee attacks.",sid.Perception='Perception is your environmental awareness and "sixth sense". It affects weapon accuracy in V.A.T.S.',sid.Endurance="Endurance is a measure of your overall physical fitness. It affects your total health and the Action Point drain from Sprinting.",sid.Charisma="Charisma is your ability to charm and convince others. It affects your success to persuade in dialogue and prices when you barter.",sid.Intelligence="Intelligence is a measure of your overall mental acuity. It affects the number of Experience Points earned.",sid.Agility="Agility is a measure of your overall finesse and reflexes. It affects the number of Action Points in V.A.T.S. and your ability to Sneak.",sid.Luck="Luck is a measure of your general good fortune. It affects the recharge rate of Critical Hits, and your chances of finding better items.";var spd={};spd.Strength=["Iron Fist","Big Leagues","Armorer","Blacksmith","Heavy Gunner","Strong Back","Steady Aim","Basher","Rooted","Pain Train"],spd.Perception=["Pickpocket","Rifleman","Awareness","Locksmith","Demolition Expert","Night Person","Refractor","Sniper","Penetrator","Concentrated Fire"],spd.Endurance=["Toughness","Lead Belly","Life Giver","Chem Resistant","Aquaboy","Rad Resistant","Adamantium Skeleton","Cannibal","Ghoulish","Solar Powered"],spd.Charisma=["Cap Collector","Lady Killer","Lone Wanderer","Attack Dog","Animal Friend","Local Leader","Party Boy","Inspirational","Wasteland Whisperer","Intimidation"],spd.Intelligence=["V.A.N.S.","Medic","Gun Nut","Hacker","Scrapper","Science","Chemist","Robotics Expert","Nuclear Physicist","Nerd Rage!"],spd.Agility=["Gunslinger","Commando","Sneak","Mister Sandman","Action Boy","Moving Target","Ninja","Quick Hands","Blitz","Gun Fu"],spd.Luck=["Fortune Finder","Scrounger","Bloody Mess","Mysterious Stranger","Idiot Savant","Better Criticals","Critical Banker","Grim Reaper's Sprint","Four Leaf Clover","Ricochet"];var pid={};pid["Iron Fist"]=["Strength",1,[1,9,18,31,46],["Channel your Chi to unleash devastating fury! Punching attacks do 20% more damage to your opponent.","Punching attacks now do 40% more damage and can disarm your opponent.","Punching attacks now do 60% more damage. Unarmed Power Attacks have a chance to cripple one of your opponent's limbs.","Punching attacks now do 80% more damage. Unarmed Power Attacks have an increased chance to cripple one of your opponent's limbs.","Punching attacks now do double damage. Criticals in V.A.T.S will paralyze your opponent."]],pid["Big Leagues"]=["Strength",2,[1,7,15,27,42],["Swing for the fences! Do 20% more melee weapon damage","Do 40% more melee weapon damage and gain a chance to disarm your opponent.","Do 60% more melee weapon damage and gain an increased chance to disarm your opponent.","Do 80% more melee weapon damage and hit all targets in front of you.","You now do double damage with a melee weapon, and gain a chance to cripple your opponent, or grand slam their head clean off!"]],
pid.Armorer=["Strength",3,[1,13,25,39],["Protect yourself from the dangers of the Wasteland with access to base level and rank 1 armor mods.","Gain access to rank 2 armor mods.","Gain access to rank 3 armor mods.","Gain access to rank 4 armor mods."]],pid.Blacksmith=["Strength",4,[1,16,29],["Fire up the forge and gain access to base level and rank 1 melee weapon mods.","Gain access to rank 2 melee weapon mods.","Gain access to rank 3 melee weapon mods."]],pid["Heavy Gunner"]=["Strength",5,[1,11,21,35,47],["Thanks to practice and conditioning, heavy guns do 20% more damage.","Heavy guns now do 40% more damage, and have improved hip fire accuracy.","Heavy guns now do 60% more damage. Hip fire accuracy is increased even more.","Heavy guns now do 80% more damage and have a chance to stagger your opponent.","Heavy guns now do double damage."]],pid["Strong Back"]=["Strength",6,[1,10,20,30],["What are you, part pack mule? Gain +25 to carry weight.","You now have +50 to carry weight.","When overencumberred, you can use Action Points to run.","When overencumberred, you can fast travel."]],pid["Steady Aim"]=["Strength",7,[1,28],["Stay on target! Hipfire accuracy is improved when firing any gun.","Hip-fire accuracy is improved even more when firing any gun."]],pid.Basher=["Strength",8,[1,5,14,26],["Get up close and personal! Gun bashing does 25% more damage.","Gun bashing now does 50% more damage and possibly cripples your opponent.","Gun bashing now does 75% more damage and has an increased chance to cripple your opponent.","Gun bashing does double damage and has an increased chance to cripple your opponent. It may also inflict a Critical Hit."]],pid.Rooted=["Strength",9,[1,22,43],["You're part tree! While standing still, you gain +25 Damage Resistance and your melee and unarmed attacks deal 25% more damage.","While standing still, you now gain +50 Damage Resistance and your melee and unarmed attacks deal 50% more damage.","While standing still, you may automatically disarm enemies that use melee weapons against you."]],pid["Pain Train"]=["Strength",10,[1,24,50],["Choo Choo! All aboard! While wearing Power Armor, sprinting into enemies hurts and staggers them. (Robots and oversized enemies are immune to stagger.)","Sprinting into enemies while wearing Power Armor now causes severe damage and a more powerful stagger. (Robots and oversized enemies are immune to stagger.)","Sprinting into enemies while wearing Power Armor now causes massive damage and knocks them down. Impact landing near enemies inflicts even more damage."]],pid.Pickpocket=["Perception",1,[1,6,17,30],["Your quick hands and sticky fingers make picking pockets 25% easier.","Picking pockets is now 50% easier. You can place a live grenade in a person's inventory.","Picking pockets is now 75% easier, and you can steal equipped weapons.","Picking pockets is now twice as easy, and you can steal equipped items."]],pid.Rifleman=["Perception",2,[1,9,18,31,46],["Keep your distance long and your kill-count high. Attacks with non-automatic rifles do 20% more damage.","Attacks with non-automatic rifles now do 40% more damage and ignore 15% of a target's armor.","Attacks with non-automatic rifles now do 60% more damage and ignore 20% of a target's armor.","Attacks with non-automatic rifles now do 80% more damage and ignore 25% of a target's armor. They also have a slight chance of crippling a limb.","Attacks with non-automatic rifles now do double damage and ignore 30% of a target's armor. They also have a slightly higher chance of crippling a limb."]],pid.Awareness=["Perception",3,[1],["Know more details about enemies after aiming at them through VATS."]],pid.Locksmith=["Perception",4,[1,7,18,41],["Your nimble fingers allow you to pick Advanced locks.","You can pick Expert locks.","You can pick Master locks.","Your bobby pins never break during lockpicking."]],pid["Demolition Expert"]=["Perception",5,[1,10,22,34],["The bigger the boom, the better! Your explosives do 25% more damage, and you can craft explosives at any Chemistry Station.","Your explosives now do 50% more damage, and grenades gain a throwing arc.","Your explosives now do 75% more damage and affect a larger area.","Your explosives now do double damage. Mines and grenades shot in V.A.T.S explode for double damage, too."]],pid["Night Person"]=["Perception",6,[1,25],["You are a creature of the night! Gain +2 Intelligence and perception between the hours of 6:00 p.m and 6:00 a.m.","You now have +3 to Intelligence and Perception between the hours of 6:00 p.m and 6:00 a.m, and night vision when sneaking."]],pid.Refractor=["Perception",7,[1,11,21,35,42],["You must be part mirror! Instantly gain +10 Energy Resistance.","You now have +20 Energy Resistance.","You now have +30 Energy Resistance.","You now have +40 Energy Resistance.","You now have +50 Energy Resistance."]],pid.Sniper=["Perception",8,[1,13,26],["It's all about focus. You have improved control and can hold your breath longer when aiming with scopes.","Non-automatic, scoped rifles have a chance of knocking down your target.","Non-automatic, scoped rifles gain +25% accuracy to headshots in V.A.T.S."]],pid.Penetrator=["Perception",9,[1,28],["There's no place to hide! In V.A.T.S you can target an enemy's body parts that are blocked by cover, with a decrease in accuracy.","In V.A.T.S. when you target an enemy's body parts that are blocked by cover, there is no decrease in accuracy."]],pid["Concentrated Fire"]=["Perception",10,[1,26,50],["Stay focused! In V.A.T.S every attack on the same body part gains +10% accuracy.","In V.A.T.S. every attack on the same body part gains +15% accuracy.","In V.A.T.S. every attack on the same body part gains +20% accuracy and does 20% more damage."]],pid.Toughness=["Endurance",1,[1,9,18,31,46],["If nothing else, you can take a beating! Instantly gain +10 damage resistance.","You now have +20 Damage Resistance","You now have +30 Damage Resistance","You now have +40 Damage Resistance","You now have +50 Damage Resistance"]],pid["Lead Belly"]=["Endurance",2,[1,6,17],["Your digestive tract has been adjusted to the weirdness of the Wasteland. Take less radiation from eating or drinking.","Take even less radiation from eating or drinking.","You take no radiation from eating or drinking."]],pid["Life Giver"]=["Endurance",3,[1,8,20],["You embody wellness! Instantly gain +20 maximum Health.","You instantly gain another +20 maximum Health.","You instantly gain another +20 maximum Health, and slowly regenerate lost Health."]],pid["Chem Resistant"]=["Endurance",4,[1,22],["All the rush without the hassle! You're 50% less likely to get addicted when consuming chems.","You gain complete immunity to chem addiction."]],pid.Aquaboy=["Endurance",5,[1,21],["Water is your ally. You no longer take radiation damage from swimming and can breathe underwater.","You become totally undetectable while submerged."]],pid["Rad Resistant"]=["Endurance",6,[1,13,26],["Exposure to the Wasteland has made you more resilient, instantly granting a +10 Radiation Resistance.","You now have +20 Radiation Resistance.","You now have +30 Radiation Resistance."]],pid["Adamantium Skeleton"]=["Endurance",7,[1,13,26],["Your skeleton has been infused with indestructible metal, reducing limb damage by 30%.","Your limb damage is now reduced by 60%.","Your limb damage is completely eliminated."]],pid.Cannibal=["Endurance",8,[1,19,38],["Feast on mortal flesh to heal your wounds! Eating human corpses restores Health.","Eating Ghoul or Super Mutant corpses restores Health.","Eating human, Ghoul or Super Mutant corpses now restores a significant amount of health."]],pid.Ghoulish=["Endurance",9,[1,24,48],["You're still human - on the outside! Radiation now regenerates your lost Health.","Radiation now regenerates even more of your lost Health.","Radiation now regenerates even more of your lost Health, and some Feral Ghouls will randomly become friendly."]],pid["Solar Powered"]=["Endurance",10,[1,27,50],["Catch some rays! Gain +2 to Strength and Endurance between the hours of 6:00 a.m and 6:00 p.m.","Sunlight slowly heals your radiation damage.","Sunlight regenerates your lost Health."]],pid["Cap Collector"]=["Charisma",1,[1,20,41],["You've mastered the art of the deal! Buying and selling prices at vendors are better.","Buying and selling prices at vendors are now much better.","You can now invest a total of 500 caps to raise a store's buying capacity."]],pid["Lady Killer"]=["Charisma",2,[1,7,22],["You're charming... and dangerous. Women suffer +5% damage in combat, and are easier to persuade in dialogue.","Women now suffer +10% damage in combat, and are even easier to persuade in dialogue. They are also easier to pacify with the Intimidation perk.","Women now suffer +15% damage in combat, and are even easier to persuade in dialogue. They are now even easier to pacify with the Intimidation perk."]],pid["Lone Wanderer"]=["Charisma",3,[1,17,40],["Who needs friends, anyway? When adventuring without a companion, you take 15% less damage and carry weight increases by 50.","When adventuring without a companion, you take 20% less damage and increases carry weight by 100.","When adventuring without a companion, you do 25% more damage."]],pid["Attack Dog"]=["Charisma",4,[1,9,25],["Your faithful canine companion can hold an enemy, giving you a greater chance to hit them in V.A.T.S.","When your dog holds an enemy, there's a chance he'll cripple the limb he's biting.","When your dog holds an enemy, there's a chance he'll cause them to bleed."]],pid["Animal Friend"]=["Charisma",5,[1,12,28],["Commune with beasts! With your gun, aim at any animal below your level and gain a chance to pacify it.","When you successfully pacify an animal, you can incite it to attack.","When you successfully pacify an animal, you can give it specific commands."]],pid["Local Leader"]=["Charisma",6,[1,14],["As the ruler everyone turns to, you are able to establish supply lines between your workshop settlements.","You can build stores and workstations at workshop settlements."]],pid["Party Boy"]=["Charisma",7,[1,15,37],["Nobody has a good time like you! There's no chance you'll get addicted to alcohol.","The effects of alcohol are doubled.","Your Luck is increased by 3 while you're under the influence of alcohol."]],pid.Inspirational=["Charisma",8,[1,19,43],["Because you lead by example, your companion does more damage in combat, and cannot hurt you.","Your companion resists more damage in combat, and can't be harmed by your attacks.","Your companion can carry more items."]],pid["Wasteland Whisperer"]=["Charisma",9,[1,21,49],["Master the post-apocalypse! With your gun, aim at any Wasteland creature below your level and gain a chance to pacify it.","When you successfully pacify a Wasteland creature, you can incite it to attack.","When you successfully pacify a Wasteland creature, you can give it to specific commands."]],pid.Intimidation=["Charisma",10,[1,23,50],["Time to show everyone who's boss! With your gun, aim at any human opponent below your level and gain a chance to pacify them.","When you successfully pacify someone, you can incite them to attack.","When you successfully pacify someone, you can give them specific commands."]],pid["V.A.N.S."]=["Intelligence",1,[1],["Let Vault-Tec guide you! The path to your closest quest target is displayed in V.A.T.S."]],pid.Medic=["Intelligence",2,[1,18,30,49],["Is there a doctor in the house? Stimpaks restore 40% of lost health, and RadAway removes 40% of radiation.","Stimpaks restore 60% of lost health, and RadAway removes 60% of radiation.","Stimpaks restore 80% of lost health, and RadAway removes 80% of radiation.","Stimpaks and RadAway restore all health and radiation, and work much more quickly."]],pid["Gun Nut"]=["Intelligence",3,[1,13,25,39],["You gain access to base level and Rank 1 gun mods","You gain access to Rank 2 gun mods.","You gain access to Rank 3 gun mods.","You gain access to Rank 4 gun mods."]],pid.Hacker=["Intelligence",4,[1,9,21,33],["Knowledge of cutting edge computer encryption allows you to hack Advanced terminals.","You can hack Expert terminals.","You can hack Master terminals.","When hacking, you never get locked out of a terminal when things go wrong."]],pid.Scrapper=["Intelligence",5,[1,23],["You can salvage uncommon components like screws, aluminum, and copper when scrapping armor and weapons.","You can salvage rare components like circuitry, nuclear material, and fiber optics when scrapping weapons and armor. Items with favorited components are highlighted."]],pid.Science=["Intelligence",6,[1,17,28,41],["Take full advantage of advanced technology with access to base level and Rank 1 high-tech mods.","Access to Rank 2 high-tech mods.","Access to Rank 3 high-tech mods.","Access to Rank 4 high-tech mods."]],pid.Chemist=["Intelligence",7,[1,16,32,45],["Any chems you take last 50% longer. Far out.","Any chems you take now last twice as long.","Any chems you take now last an additional 150% Longer.","Any chems you take now last an additional 200% Longer."]],pid["Robotics Expert"]=["Intelligence",8,[1,19,44],["Machines will always serve humans, if you have anything to say about it. Hack a robot, and gain a chance to power it on or off, or initiate a self destruct.","When you successfully hack a robot, you can incite it to attack.","When you successfully hack a robot, you can give it specific commands."]],pid["Nuclear Physicist"]=["Intelligence",9,[1,14,26],["You've learned to split the atom... and command it. Radiation weapons do 50% more damage and Fusion Cores last an extra 25% longer.","Radiation weapons now do double damage and Fusion Cores last an extra 50% longer.","Fusion Cores can be ejected from Power Armor like devastating grenades and Fusion Cores last twice as long."]],pid["Nerd Rage!"]=["Intelligence",10,[1,31,50],["Genius. Is. ANGRY! When your health drops below 20%, time slows and you gain +20 Damage Resistance and do 20% more damage while the effect lasts.","You now gain 30 more Damage Resistance and do 30% more damage while Nerd Rage is in effect.","You now gain 40 more Damage Resistance and do 40% more damage while Nerd Rage is in effect."]],pid.Gunslinger=["Agility",1,[1,7,15,27,42],["20% more damage with pistols.","Non-automatic pistols now do 40% more damage and have increased range.","Non-automatic pistols now do 60% more damage and range is increased even further.","Non-automatic pistols now do 80% more damage and their attacks can disarm opponents.","Non-automatic pistols now do double damage. Their attacks have a much better chance to disarm opponents, and may even cripple a limb."]],pid.Commando=["Agility",2,[1,11,21,35,49],["Rigorous combat training means automatic weapons do 20% more damage.","Your automatic weapons now do 40% more damage, with improved hip fire accuracy.","Your automatic weapons now do 60% more damage. Hip fire accuracy is improved even more.","Your automatic weapons now do 80% more damage and gain a chance to stagger opponents.","Your automatic weapons now do double damage and have a greater chance to stagger opponents."]],pid.Sneak=["Agility",3,[1,5,12,23,38],["Become whisper, become shadow. You are 20% harder to detect while sneaking.","You are now 30% harder to detect while sneaking, and no longer trigger floor-based traps.","You are now 40% harder to detect while sneaking, and no longer trigger enemy mines.","You are now 50% harder to detect while sneaking, and running no longer adversely affects stealth.","Engaging stealth causes distant enemies to lose you."]],pid["Mister Sandman"]=["Agility",4,[1,17,30],["As an agent of death itself, you can instantly kill a sleeping person. Your silenced weapons do an additional 15% sneak attack damage.","Your silenced weapons do an additional 30% sneak attack damage.","Your silenced weapons do an additional 50% sneak attack damage."]],pid["Action Boy"]=["Agility",5,[1,18],["There's no time to waste! Your Action Points regenerate 25% faster.","Your Action Points regenerate 50% faster."]],pid["Moving Target"]=["Agility",6,[1,24,44],["They can't hurt what they can't hit! Get +25 Damage Resistance and +25 Energy Resistance when you're sprinting.","You now get +50 Damage Resistance and +50 Energy Resistance when you're sprinting.","Sprinting costs 50% fewer Action Points."]],pid.Ninja=["Agility",7,[1,16,33],["Trained as a shadow warrior, your ranged sneak attacks do 2.5x normal damage and your melee sneak attacks do 4x normal damage.","Your ranged sneak attacks do 3x normal damage and your melee sneak attacks do 5x normal damage.","Your ranged sneak attacks do 3.5x normal damage, melee sneak attacks do 10x normal damage."]],pid["Quick Hands"]=["Agility",8,[1,28],["In combat, there's no time to hesitate. You can reload all guns faster.","Reloading guns cost no Action Points in V.A.T.S."]],pid.Blitz=["Agility",9,[1,29],["Find the gap and make the tackle! V.A.T.S. melee distance is increased significantly.","V.A.T.S. melee distance is increased even more, and the farther the Blitz distance, the greater the damage."]],pid["Gun Fu"]=["Agility",10,[1,26,50],["You've learned to apply ancient martial arts to gunplay! Do 25% more damage to your second V.A.T.S. target and beyond.","In V.A.T.S. you do 50% more damage to your third target and beyond.","In V.A.T.S. you instantly do a Critical Hit against your fourth target and beyond."]],pid["Fortune Finder"]=["Luck",1,[1,5,25,40],["You've learned to discover the Wasteland's hidden wealth, and find more bottle caps in containers.","You find even more bottle caps in containers.","You find even more bottle caps in containers.","You find even more bottle caps in containers, and there is a chance of enemies exploding in a shower of caps when you kill them."]],pid.Scrounger=["Luck",2,[1,7,24,37],["You know just how to scavenge to keep the fight going, and find more ammunition in containers.","You find even more ammunition in containers.","You find even more ammunition in containers.","You find even more ammunition in containers."]],pid["Bloody Mess"]=["Luck",3,[1,9,31,47],["+5% bonus damage means enemies will sometimes explode into a gory red paste. Watch out for flying eyeballs!","You now inflict +10% damage in combat.","You now inflict +15% damage in combat.","When an enemy explodes, nearby enemies may suffer the same fate."]],pid["Mysterious Stranger"]=["Luck",4,[1,22,41],["Who is he? Why does he help? Who cares! The Mysterious Stranger will appear occasionally in V.A.T.S to lend a hand, with deadly efficiency...","The Mysterious Stranger appears more often in V.A.T.S.","The Mysterious Stranger appears more often in V.A.T.S. When he kills an opponent, there is a chance your Critical meter gets filled."]],pid["Idiot Savant"]=["Luck",5,[1,11,34],["You're not stupid! Just... different. Randomly receive 3x XP from any action, and the lower your intelligence, the greater the chance.","You now randomly receive 5x XP from any action, and the lower your intelligence, the greater the chance.","Randomly receiving bonus XP from any action may trigger 3x XP for all kills for a short period of time. The lower intelligence, the greater the chance."]],pid["Better Criticals"]=["Luck",6,[1,15,40],["Advanced training for enhanced combat effectiveness! Criticals do 50% extra damage.","Your criticals now do twice as much extra damage.","Your criticals now do 2.5x as much extra damage."]],pid["Critical Banker"]=["Luck",7,[1,17,43],["You're a patient battlefield tactician, and can save a Critical Hit, to be used in V.A.T.S. when you need it the most.","You can now save 2 Critical Hits, to be used in V.A.T.S. when you need them the most.","You can now save 3 Critical Hits, to be used in V.A.T.S. when you need them the most. Banking a Critical has a chance to save an additional Critical."]],pid["Grim Reaper's Sprint"]=["Luck",8,[1,19,46],["Death becomes you! Any kill in V.A.T.S. has a 15% chance to restore all Action Points.","Any kill in V.A.T.S. now has a 25% chance to restore all Action Points.","Any kill in V.A.T.S. now has a 35% chance to restore all Action Points and refill your Critical meter."]],pid["Four Leaf Clover"]=["Luck",9,[1,13,32,48],["Feeling lucky? You should! Each hit in V.A.T.S. has a chance of filling your Critical meter.","Each hit in V.A.T.S. now has an even better chance of filling your Critical meter.","Each hit in V.A.T.S. now has a very good chance of filling your Critical meter.","Each hit in V.A.T.S. now has an excellent chance of filling your Critical meter."]],pid.Ricochet=["Luck",10,[1,29,50],["What goes around comes around! An enemy's ranged attack will sometimes ricochet back and instantly kill them. The closer you are to death, the higher the chance.","There's an increased chance that an enemy's shot will ricochet back and kill them.","When an enemy's shot ricochets back and kills them, there is a chance your Critical meter gets filled."]];var bid={};bid["Astoundingly Awesome Tales"]=[14,"<UL><LI>Regenerate 1 HP per minute.</LI><LI>+5% damage with scoped weapons.</LI><LI>Take 5% less damage from robots.</LI><LI>+5% damage with the Alien Blaster.</LI><LI>+5 Poison Resistance.</LI><LI>+5% damage against Mirelurks.</LI><LI>+5% damage at night.</LI><LI>+5 Action Points.</LI><LI>+5% damage with the Cryolator.</LI><LI>+5 Radiation Resistance.</LI><LI>RadAway heals +5% radiation damage.</LI><LI>Your canine companion takes 10% less damage.</LI><LI>+5% damage against Ghouls.</LI><LI>+5% damage against Super Mutants.</LI></UL>"],bid["Grognak the Barbarian"]=[10,"Grants the perk 'Barbarian'. Each edition raises the critical damage of melee and unarmed attacks by 5%."],bid["Guns & Bullets"]=[10,"Each issue raises the critical damage of ballistic weapons by +5%."],bid["Hot Rodder"]=[3,"Every issue of Hot Rodder you collect adds a new, unique paint job for your Power Armor, available at any Power Armor Station."],bid["La Coiffe"]=[2,"Each issue of La Coiffe grants a new hairstyle."],bid["Live & Love"]=[9,"<UL><LI>Companions gain +10 health.</LI><LI>Companions inflict +5% damage.</LI><LI>Companions gain +10 carry weight.</LI><LI>Gain +25% XP from persuading women.</LI><LI>Gain +1 Luck from alcohol while travelling with a companion.</LI><LI>Companions gain +5 Damage and Energy Resistance</LI><LI>Gain +25% XP from persuading men.</LI><LI>Gain +5% XP while travelling with a companion.</LI><LI>Robot companions inflict +5% damage.</LI></UL>"],bid["Massachusetts Surgical Journal"]=[9,"Each issue raises limb damage by an additional +2%."],bid["Picket Fences"]=[5,"<UL><LI>Build picket fences for settlements at workbenches.</LI><LI>Build high-tech lighting for settlements.</LI><LI>Build statues in settlements.</LI><LI>Unlock additional potted plants for settlements.</LI><LI>Unlock additional furniture for settlements.</LI></UL>"],bid["RobCo Fun"]=[4,"Each issue contains a holodisk with a copy of a holotape game on it."],bid["Taboo Tattoos"]=[5,"Permanently unlock a new facial tattoo."],bid["Tales of a Junktown Jerky Vendor"]=[8,"Get better prices when buying from vendors."],bid["Tesla Science Magazine"]=[9,"Increases your energy weapon critical damage by 5%."],bid["Total Hack"]=[3,"<UL><LI>Unlocks the ability to hack Protectrons.</LI><LI>Unlocks the ability to hack Spotlights.</LI><LI>Unlocks the ability to hack Turrets.</LI></UL>"],bid["Tumblers Today"]=[5,"Each issue you collect will make lockpicking a little easier, permanently."],bid.Unstoppables=[5,"Each issue increases the chance to avoid all damage from an attack by 1%."],bid["U.S. Covert Operations Manual"]=[10,"Each issue you collect will make you more difficult to detect while sneaking."],bid["Wasteland Survival Guide"]=[9,"<UL><LI>Healing gained through fruits and vegetables increased by 50%.</LI><LI>Receive 5% less damage from insects.</LI><LI>Healing gained through eating Food & Beverages increased by 50%.</LI><LI>Unlock new decorative objects for our settlements.</LI><LI>Diamond City is marked permanently on the map.</LI><LI>Grocers give us a 10% discount.</LI><LI>Swim 25% faster.</LI><LI>Receive 5% less damage in melee.</LI><LI>Collect extra meat from animals.</LI></UL>"],bid["You're S.P.E.C.I.A.L.: Strength"]=[1,"Permanently increases Strength by 1."],bid["You're S.P.E.C.I.A.L.: Perception"]=[1,"Permanently increases Perception by 1."],bid["You're S.P.E.C.I.A.L.: Endurance"]=[1,"Permanently increases Endurance by 1."],bid["You're S.P.E.C.I.A.L.: Charisma"]=[1,"Permanently increases Charisma by 1."],bid["You're S.P.E.C.I.A.L.: Intelligence"]=[1,"Permanently increases Intelligence by 1."],bid["You're S.P.E.C.I.A.L.: Agility"]=[1,"Permanently increases Agility by 1."],bid["You're S.P.E.C.I.A.L.: Luck"]=[1,"Permanently increases Luck by 1."];var hid={};hid.Strength=["It's essential to give your arguments impact.","Permanently increases Strength by 1."],hid.Perception=["Only through observation will you perceive weakness.","Permanently increases Perception by 1."],hid.Endurance=["Always be ready to take one for the team.","Permanently increases Endurance by 1."],hid.Charisma=["Nothing says pizzaz like a winning smile.","Permanently increases Charisma by 1."],hid.Intelligence=["It takes the smartest individuals to realize there's always more to learn.","Permanently increases Intelligence by 1."],hid.Agility=["Never be afraid to dodge the sensitive issues.","Permanently increases Agility by 1."],hid.Luck=["There's only one way to give 110%.","Permanently increases Luck by 1."],hid.Barter=["Never forget to walk away with more than you've brought.","Permanently grants 5% better prices when buying."],hid["Big Guns"]=["The best way to win an argument is to be the loudest.","Permanently increases 25% critical damage with heavy weapons."],hid["Energy Weapons"]=["Arrive at peaceful resolutions by using superior firepower.","Permanently increases critical damage with energy weapons by 25%."],hid.Explosives=["The best way to solve a problem is to make it go away.","Permanently increases damage with explosives by 15%."],hid.Lockpicking=["Always strive for the unobtainable.","Lockpicking is permanently easier."],hid.Medicine=["The smart man knows a bandage only hides his wounds.","Permanently increases healing from stimpaks by 10%."],hid.Melee=["It's important to do business up close and personal.","Permanently increases critical damage with melee weapons by 25%."],hid.Repair=["Why go down with the ship when you can try to fix it?","Permanently increases the duration of fusion cores by 10%."],hid.Science=["Always be prepared to explain the hows and whys.","Permanently gives you an extra guess when hacking terminals."],hid["Small Guns"]=["Because it's easier to have courage from a safe distance away.","Permanently increases critical damage with ballistic weapons by 25%."],hid.Sneak=["The safest distance between two points is a shadowy line.","Permanently makes the player character 10% harder to detect."],hid.Speech=["Let words be your weapon.","Permanently gives all vendors 100 bottle caps extra when bartering."],hid.Unarmed=["When words fail, there's always fists.","Permanently increases critical damage with unarmed attacks by 25%."];var tid={};tid.TIP_CREATE_NO_ATTR_NO_NAME="Welcome Citizen! Please fill out your resitration form by assigning all your S.P.E.C.I.A.L. attribute points and filling out your name. Once complete, press 'Next' to complete your registration and unlock levelling features. Use the 'View Perks' button as a reference while building your character.",tid.TIP_CREATE_HAS_ATTR_NO_NAME="Great! You have assigned all your S.P.E.C.I.A.L. attribute points! Now fill out your name and press 'Next' to complete your registration!",tid.TIP_CREATE_HAS_ATTR_HAS_NAME="Welcome to Vault-Tec <span style='font-weight:bold;color:gold;'>#NAME#</span>! Press 'Next' to complete your registration and access build planning features.",tid.TIP_CREATE_NO_ATTR_HAS_NAME="Hi <span style='font-weight:bold;color:gold;'>#NAME#</span>! Assign your remaining S.P.E.C.I.A.L. attribute points and press 'Next' to complete your registration!",tid.TIP_PRESS_LEVEL_UP="You are now registered with Vault-Tec! Press 'Level Up' to assign your first Perk! Alternatively you can try reading a book, or collecting a bobblehead. These can all be done at level 1!",tid.TIP_HOVER_DERIVED="Did you know that you can hover over any derived statistic to see how it was calculated? This is a good way to see which perks, books and bobbleheads affect your character and plan accordingly!",tid.TIP_CHANGE_NAME="Don't like your name <span style='font-weight:bold;color:gold;'>#NAME#</span>? You can change it! Hover over your name and click to enter your new identity!",tid.TIP_REREGISTER="Want to start over? Click the 'Reset Character' button to begin over and make a new build. Nothing like a fresh start!",tid.TIP_UNDO="Not happy with your last #LASTACTION#? Click 'Undo' and your character will #NEXTACTION#! You can also click 'Redo' to reapply any previous Undo actions!",tid.TIP_READ_YOURE_SPECIAL="Did you know that early in your adventures in the wasteland you will encounter a book called <span style='font-weight:bold;'>You're S.P.E.C.I.A.L.</span>? Reading it will permanently increase an attribute of your choice! Press 'Read Book' to access this book and improve your character.",tid.TIP_LONE_WANDERER="Worried about taking the <span style='font-weight:bold;'>Lone Wanderer</span> perk and it not working with Dogmeat as a companion? Worry no more! It works with your trusty K9 friend.!",tid.TIP_PERK_NEXT_PREV="To select a perk on level up, click the portrait of the perk, not the '+' and '-' buttons. These are used to view the next and previous ranks of a perk respectively.",tid.TIP_PERK_SELECT_SPECIAL="Did you know that when selecting a perk you can choose to instead boost one of your S.P.E.C.I.A.L. attributes?",tid.TIP_NO_LEVEL_CAP="There is no level cap in Fallout 4! This means that you can theoretically max out every attribute and perk in the game!",tid.TIP_INTELLIGENCE_DUMB_LUCK="Your Intelligence and the <span style='font-weight:bold;'>Dumb Luck</span> perk, as well as the <span style='font-weight:bold;'>Live & Love</span> book all effect the rate at which you gain XP! This combined with no level cap means that you gain perks at a faster rate!",tid.TIP_PERK_DISABLED="Perks displayed in grey are available for selection if you meet the level criteria. Perks that are blacked out with a white outline mean that you do not yet meet the attribute required to select that perk.",tid.TIP_PERK_EXPORT="Want to share your fantastic character with the world? You can! Click the 'Export' button to copy a link to your build that you can share with your friends or use for your own reference while playing the game!",tid.TIP_ASTOUNDING_TALES="One issue of the <span style='font-weight:bold;'>Astoundingly Awesome Tales</span> book can increase your AP permanently!",tid.TIP_WEP_DMG="All of your 'Dmg.' derived statistics are affected by both the <span style='font-weight:bold;'>Lone Wanderer</span> and <span style='font-weight:bold;'>Bloody Mess</span> perks.",tid.TIP_WEP_CRIT="All of yout 'Crit Dmg.' derived statistics are affected by a book, a bobblehead and a perk. Add one of each for your weapon type to make your critical hits devastating!",tid.TIP_CARRY_WEIGHT="Need to carry more loot?! Try selecting the <span style='font-weight:bold;'>Strong Back</span> and <span style='font-weight:bold;'>Lone Wanderer</span> perks!",tid.TIP_SCROUNGER="Do you like to use automatic weapons, but find that you're running out of ammo? Why not choose the <span style='font-weight:bold;'>Scrounger</span> perk and keep your favourite assault rifle in constant supply of ammunition!";var specialKeys=["Strength","Perception","Endurance","Charisma","Intelligence","Agility","Luck"],pLevelData={},pLevel=1,pStartingSPECIAL=1,pSPECIAL=[],pMaxSPECIAL=28,pRemainingAttributes=21,pBaseSPECIAL=pMaxSPECIAL-pRemainingAttributes,pKarma=0,pGender="Male",pCreated=!1,pEventLog=[],pRedoStack=[],pCurrentRankDisplayed=-1,pPerkChartViewMode=0,pCurrentTipId="";
$.fn.visible=function(){return this.css("visibility","visible")},$.fn.invisible=function(){return this.css("visibility","hidden")},$.fn.selectRange=function(e,a){return a||(a=e),this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,a);else if(this.createTextRange){var t=this.createTextRange();t.collapse(!0),t.moveEnd("character",a),t.moveStart("character",e),t.select()}})},$(function(){$("#rpg-gaming-link").on("click",function(){$(location).attr("href","http://www.rpg-gaming.com")}),$(".special-value").each(function(){$(this).html(pStartingSPECIAL),pSPECIAL.push(pStartingSPECIAL)}),$("#remaining-attributes").html(pRemainingAttributes),$(document).on("click",".special-button-add",function(){var e=$(this).parent().index(".special-hoverable")-1;pSPECIAL[e]<10&&pRemainingAttributes>0&&(pSPECIAL[e]=pSPECIAL[e]+1,updatePage())}),$(document).on("click",".special-button-subtract",function(){var e=$(this).parent().index(".special-hoverable")-1;pSPECIAL[e]>1&&(pSPECIAL[e]=pSPECIAL[e]-1,updatePage())}),$(document).on("mouseenter",".special-hoverable",function(){$(".special-hoverable").removeClass("special-hover"),$(this).addClass("special-hover"),$(this).find(".special-button-subtract").each(function(){$(this).find("img").first().attr("src","img/fo4-btn-left-arrow-hover.png")}),$(this).find(".special-button-add").each(function(){$(this).find("img").first().attr("src","img/fo4-btn-right-arrow-hover.png")}),loadFOB("Special",$(this).data("reference")),$("#special-info-description").html(sid[$(this).data("reference")]),"Name"==$(this).data("reference")?($("#name").focus(),$("#name").selectRange($("#name").val().length)):$("#name").blur()}),$(document).on("mouseleave","#name",function(e){updateTips()}),$(document).on("mouseleave",".special-hoverable",function(e){$(this).removeClass("special-hover"),$(this).find(".special-button-subtract").each(function(){$(this).find("img").first().attr("src","img/fo4-btn-left-arrow.png")}),$(this).find(".special-button-add").each(function(){$(this).find("img").first().attr("src","img/fo4-btn-right-arrow.png")}),0==$("#name").val().length&&setTimeout(function(){var e=!1;$(".special-hoverable").each(function(){$(this).is(":hover")&&"Name"!=$(this).data("reference")&&(e=!0)}),e||(loadFOB("Special","Name"),$("#special-info-description").html(sid.Name),$(".special-hoverable:first").addClass("special-hover"),$("#name").focus())},100)}),$(document).on("click",".gender:not(.gender-selected)",function(){$(".gender-selected").each(function(){$(this).removeClass("gender-selected")}),$(this).addClass("gender-selected"),pGender=$(this).data("reference")});for(var e=0;10>e;e++){if(0==e){$("#lu-perks").append("<DIV class='lu-perk-line' data-row='"+e+"'></DIV>"),$("#lu-perks").find(".lu-perk-line").last().append("<DIV class='lu-perk-level'></DIV>");for(var a=0;a<specialKeys.length;a++){var t=getPerkFilename(specialKeys[a]),o="<DIV class='lu-perk-header' data-attribute='"+specialKeys[a]+"'>";o+="<DIV class='lu-perk-header-label'>"+specialKeys[a].toUpperCase()+"</DIV>",o+="<DIV class='lu-perk-header-gold-stars'></DIV>",o+="<IMG class='lu-perk-img' src='"+t+"' /></DIV>",$("#lu-perks").find(".lu-perk-line").last().append(o)}}$("#lu-perks").append("<DIV class='lu-perk-line' data-row='"+String(e+1)+"'></DIV>");var n=String(e+1);n.length<2&&(n="0"+n),$("#lu-perks").find(".lu-perk-line").last().append("<DIV class='lu-perk-level'>"+n+"</DIV>");for(var a=0;a<specialKeys.length;a++){var r=spd[specialKeys[a]],t=getPerkFilename(r[e]),s="<DIV class='lu-perk-rank-buttons'><DIV data-reference=\""+r[e]+"\" class='lu-perk-rank-button lu-perk-rank-down'><span class='lu-perk-rank-button-text'>-</span></DIV><DIV data-reference=\""+r[e]+"\" class='lu-perk-rank-button lu-perk-rank-up'><span class='lu-perk-rank-button-text'>+</span></DIV></DIV>";$("#lu-perks").find(".lu-perk-line").last().append("<DIV class='lu-perk' data-attribute='"+specialKeys[a]+"' data-level='"+String(e+1)+"' data-perk-id=\""+r[e]+"\"><DIV class='lu-perk-image-wrapper'><IMG class='lu-perk-outline lu-perk-img' src='"+t+"' /><IMG class='lu-perk-inline lu-perk-img' src='"+t+"'/></DIV>"+s+"</DIV>")}}$(document).on("mouseenter",".lu-perk-header",function(){updatePerkInfoPanel($(this)),$("#lu-perk-info").toggle(!0)}),$(document).on("click",".lu-perk-header",function(){var e=$(this).data("attribute"),a=getSPECIAL(e);if(10!=a||$(this).hasClass("lu-perk-selected"))if($(this).hasClass("lu-perk-selected"))$(this).removeClass("lu-perk-selected"),updatePerkInfoPanel($(this)),updatePerkAvailability(),$(".star-fill-animation.star-fill-gold").css("visibility","");else{if($(".lu-perk-selected").length>0)return;$(this).addClass("lu-perk-selected"),updatePerkInfoPanel($(this)),updatePerkAvailability(),$(".star-fill-animation.star-fill-gold").css("visibility","hidden")}}),$(document).on("click",".lu-perk",function(){if($(this).hasClass("lu-perk-available")&&$(this).hasClass("lu-perk-requirements-met")){if($(this).hasClass("lu-perk-active")&&!$(this).hasClass("lu-perk-selected")){var e=$(this).data("perk-id");if(getPlayerPerkRank(e)>=getPerkMaxRank(e))return}if($(this).hasClass("lu-perk-selected"))$(this).removeClass("lu-perk-selected"),updatePerkInfoPanel($(this)),updatePerkAvailability(),$(".star-fill-animation.star-fill-gold").css("visibility","");else{if($(".lu-perk-selected").length>0)return;$(this).addClass("lu-perk-selected"),updatePerkInfoPanel($(this)),updatePerkAvailability(),$(".star-fill-animation.star-fill-gold").css("visibility","hidden")}}}),$(document).on("mouseenter",".lu-perk",function(){var e=$(this).data("perk-id");pCurrentRankDisplayed=getPlayerPerkRank(e);var a=getPerkMaxRank(e);$(this).find(".lu-perk-rank-buttons:first").css("display",1==a?"none":"block"),a>1&&($(this).find(".lu-perk-rank-up:first").toggleClass("button-disabled",pCurrentRankDisplayed>=a),$(this).find(".lu-perk-rank-down:first").toggleClass("button-disabled",0==pCurrentRankDisplayed)),updatePerkInfoPanel($(this)),$("#lu-perk-info").toggle(!0)}),$(document).on("mouseleave",".lu-perk",function(e){pCurrentRankDisplayed=-1,$(this).find(".lu-perk-rank-buttons:first").css("display","none"),e.preventDefault()}),$(document).on("click",".lu-perk-rank-up",function(e){if(!$(this).hasClass("button-disabled")){var a=$(this).data("reference");pCurrentRankDisplayed++;var t=$(this).closest(".lu-perk");updatePerkInfoPanel(t,!0);var o=getPerkMaxRank(a);t.find(".lu-perk-rank-up:first").toggleClass("button-disabled",$(this).closest("DIV.lu-perk").hasClass("lu-perk-active")&&0!=pPerkChartViewMode?pCurrentRankDisplayed>=o:pCurrentRankDisplayed+1>=o),t.find(".lu-perk-rank-down:first").toggleClass("button-disabled",$(this).closest("DIV.lu-perk").hasClass("lu-perk-active")&&0!=pPerkChartViewMode?pCurrentRankDisplayed-1==0:0==pCurrentRankDisplayed)}e.stopPropagation(),e.preventDefault()}),$(document).on("mouseleave",".lu-perk-rank-buttons",function(e){pCurrentRankDisplayed=-1;var a=$(this).parent(),t=a.data("perk-id"),o=getPerkMaxRank(t);a.find(".lu-perk-rank-buttons:first").css("display",1==o?"none":"block"),o>1&&(a.find(".lu-perk-rank-up:first").toggleClass("button-disabled",pCurrentRankDisplayed>=o),a.find(".lu-perk-rank-down:first").toggleClass("button-disabled",0==pCurrentRankDisplayed)),updatePerkInfoPanel(a),$(this).css("opacity","")}),$(document).on("mouseenter",".lu-perk-rank-buttons",function(e){var a=$(this).parent(),t=a.data("perk-id");pCurrentRankDisplayed=getPlayerPerkRank(t);var o=getPerkMaxRank(t);o>1&&($(this).find(".lu-perk-rank-up:first").toggleClass("button-disabled",$(this).closest("DIV.lu-perk").hasClass("lu-perk-active")&&0!=pPerkChartViewMode?pCurrentRankDisplayed>=o:pCurrentRankDisplayed+1>=o),$(this).find(".lu-perk-rank-down:first").toggleClass("button-disabled",$(this).closest("DIV.lu-perk").hasClass("lu-perk-active")&&0!=pPerkChartViewMode?pCurrentRankDisplayed-1==0:0==pCurrentRankDisplayed)),updatePerkInfoPanel(a,!0),$(this).css("opacity","1")}),$(document).on("click",".lu-perk-rank-buttons",function(e){e.stopPropagation(),e.preventDefault()}),$(document).on("click",".lu-perk-rank-down",function(e){if(!$(this).hasClass("button-disabled")){var a=$(this).data("reference");pCurrentRankDisplayed--;var t=$(this).closest(".lu-perk");updatePerkInfoPanel(t,!0);var o=getPerkMaxRank(a);t.find(".lu-perk-rank-up:first").toggleClass("button-disabled",$(this).closest("DIV.lu-perk").hasClass("lu-perk-active")&&0!=pPerkChartViewMode?pCurrentRankDisplayed>=o:pCurrentRankDisplayed+1>=o),t.find(".lu-perk-rank-down:first").toggleClass("button-disabled",$(this).closest("DIV.lu-perk").hasClass("lu-perk-active")&&0!=pPerkChartViewMode?pCurrentRankDisplayed-1==0:0==pCurrentRankDisplayed)}e.stopPropagation(),e.preventDefault()}),$(document).on("click","#level-up-perks-button",function(){$("#level-up-perks-dialog").dialog("open")}),$(document).on("input paste","#name",function(){updateButtonStates(),("TIP_CREATE_HAS_ATTR_HAS_NAME"==pCurrentTipId||"TIP_CREATE_NO_ATTR_HAS_NAME"==pCurrentTipId)&&(pCurrentTipId=""),setTimeout(function(){updateTips()},3e3)}),updateButtonStates(),$("#level-up-perks-dialog").dialog({resizable:!1,height:855,width:1240,modal:!0,autoOpen:!1,show:"fade",open:function(){$(".lu-perk-selected").removeClass("lu-perk-selected"),0==pPerkChartViewMode?($("#level-up-perks-dialog").find(".panel-top-legend").html("View Perks"),$("#lu-perks-button-save").hide()):1==pPerkChartViewMode?($("#level-up-perks-dialog").find(".panel-top-legend").html("Welcome to level "+pLevel),$("#lu-perks-button-save").show()):2==pPerkChartViewMode&&($("#level-up-perks-dialog").find(".panel-top-legend").html("Spend Saved Perk - Level "+pLevel),$("#lu-perks-button-save").hide()),updatePerkAvailability()},beforeClose:function(){$(".ui-widget-overlay").fadeOut(250)},buttons:[{id:"lu-perks-button-ok",text:"OK",click:function(){0!=pPerkChartViewMode&&finalizeLevelUp(!1,!1,2==pPerkChartViewMode),$("#level-up-perks-dialog").dialog("option","hide","fade").dialog("close")}},{id:"lu-perks-button-save",text:"Save Perk",click:function(){$("#level-up-perks-dialog").dialog("option","hide","fade").dialog("close"),finalizeLevelUp(!1,!0)}},{id:"lu-perks-button-cancel",text:"Cancel",click:function(){1==pPerkChartViewMode&&(delete pLevelData[pLevel],pLevel--),$("#level-up-perks-dialog").dialog("option","hide","fade").dialog("close")}}]}),$("#lu-perks-button-ok").before("<DIV id='lu-perks-action-description'>CHOOSE 1 PERK</DIV>"),$("#lu-perks").slimScroll({position:"left",height:630,alwaysVisible:!0,color:"#57CC86",opacity:"0.85",wheelStep:30,allowPageScroll:!1,railVisible:!0,railColor:"green"}),$("#event-log-content").slimScroll({position:"left",height:"653px",alwaysVisible:!0,color:"#57CC86",opacity:"0.85",wheelStep:100,allowPageScroll:!1,railVisible:!0,railColor:"green"}),$(document).on("click","#next-button",function(){if($(this).hasClass("button-disabled")){$(this).data("ui-tooltip")&&($(this).tooltip("destroy"),$(this).attr("title",""));var e="";0==$("#name").val().length?e="Hi Citizen! Please fill out your name to complete your registration!":pRemainingAttributes>0&&(e="Hi Citizen! Please assign all your S.P.E.C.I.A.L. points to complete your registration!"),$(this).attr("title",e),$(this).data("ui-tooltip")||$(this).tooltip({tooltipClass:"registration-tooltip",track:!0,show:!1,position:{my:"left bottom-25",at:"left-50 center"}}),$(this).tooltip("open")}else $("#special-panel").fadeOut(200),setTimeout(function(){finalizePlayerCreation()},200)}),$(document).on("mouseleave","#next-button",function(){$(this).data("ui-tooltip")&&($(this).tooltip("destroy"),$(this).attr("title",""))}),$(".gender").tooltip({tooltipClass:"gender-tooltip",track:!0,show:!1,position:{my:"left-25 center-40",at:"right center"}}),$("#cs-tabs").tabs({event:"mouseover"}),$(document).on("mouseenter",".cs-hoverable",function(){if("Header"!=$(this).data("type")){loadFOB("CharacterSheet",$(this).data("reference"),$(this).data("type"));var e=$(this).data("type");switch(e){case"SPECIAL":$("#cs-player-description").html(sid[$(this).data("reference")]),$(this).data("ui-tooltip")&&($(this).tooltip("destroy"),$(this).attr("title",""));var a=$(this).data("reference"),t=$(this).find(".cs-special-value:first").html(),o="<DIV class='cs-special-tooltip-line'><DIV class='cs-special-tooltip-label cs-special-tooltip-title'>"+a+"</DIV><DIV class='cs-special-tooltip-value cs-special-tooltip-title'>"+t+"</DIV></DIV>",n=getSPECIAL(a,!0),r=0,s=0,d=0;for(var c in pLevelData){var p=pLevelData[c].Perks;for(var h in p)p[h]==a&&r++;var g=pLevelData[c].Books;for(i in g)strStartsWith(g[i],"You're S.P.E.C.I.A.L.")&&strEndsWith(g[i],a)&&s++;var u=pLevelData[c].Bobbleheads;for(l in u)u[l]==a&&d++}o+="<BR><DIV class='cs-special-tooltip-line'><DIV class='cs-special-tooltip-hr'></DIV></DIV>",o+="<DIV class='cs-special-tooltip-line'><DIV class='cs-special-tooltip-label'>Base</DIV><DIV class='cs-special-tooltip-value'>"+n+"</DIV></DIV>",r>0&&(o+="<BR><DIV class='cs-special-tooltip-line'><DIV class='cs-special-tooltip-label'>Perks</DIV><DIV class='cs-special-tooltip-value'>"+r+"</DIV></DIV>"),s>0&&(o+="<BR><DIV class='cs-special-tooltip-line'><DIV class='cs-special-tooltip-label'>Book</DIV><DIV class='cs-special-tooltip-value'>"+s+"</DIV></DIV>"),d>0&&(o+="<BR><DIV class='cs-special-tooltip-line'><DIV class='cs-special-tooltip-label'>Bobblehead</DIV><DIV class='cs-special-tooltip-value'>"+d+"</DIV></DIV>"),$(this).attr("title",""),$(this).data("ui-tooltip")||$(this).tooltip({content:function(){return o},tooltipClass:"cs-special-tooltip",track:!1,show:!1,position:{my:"left bottom-25",at:"right-145 center"},open:function(e,a){setTimeout(function(){$(a.tooltip).hide(200)},4e3)}}),$(this).tooltip("open");break;case"Perk":var k=$(this).data("reference"),m="";if(-1!=$.inArray(k,specialKeys))m=sid[k];else{var b=getPlayerPerkRank(k)-1;m=pid[k][3][b]}0==m.length&&(m="To be confirmed..."),$("#cs-perks-description").html(m);break;case"Book":var v=$(this).data("reference");$("#cs-books-description-scroll").html(bid[v][1]);for(var y=getPlayerBooksRead(v),f=bid[v][0],P="",I=0;f>I;I++)P+=y>I?"<img data-idx='"+String(I+1)+"' class='book-star-filled' src='img/fo4-star-filled.png'/>":"<img data-idx='"+String(I+1)+"' class='book-star-empty' src='img/fo4-star-empty.png'/>";$("#cs-books-stars").html(P);break;case"Bobblehead":var L=$(this).data("reference"),C=hid[L][0]+"<BR><BR>"+hid[L][1];$("#cs-bobbleheads-description").html(C)}$(this).parent().find(".cs-hoverable-hover").first().removeClass("cs-hoverable-hover"),$(this).addClass("cs-hoverable-hover")}}),$(document).on("click","#reset-button",function(){$("#name").val(""),pSPECIAL=[],pPerkChartViewMode=0,$(".special-value").each(function(){$(this).html(pStartingSPECIAL),pSPECIAL.push(pStartingSPECIAL)}),pLevelData={},pLevel=1,pRemainingAttributes=21,pKarma=0,pGender="Male",pCreated=!1,pEventLog=[],$(".lu-perk-selected").removeClass("lu-perk-selected"),$(".gender-selected").removeClass("gender-selected"),$('.gender[data-reference="Male"]').addClass("gender-selected"),$(".event").remove(),$("#special-gender").show(),$("#bf-creation").show(),$("#bf-main").hide(),$("#remaining-attributes").show(),$("#remaining-attributes-label").show(),$(".special-button-add").show(),$(".special-button-subtract").show(),$("#name").removeAttr("readonly"),$("#event-log-heading").fadeOut(200),$("#event-log-content-wrapper").fadeOut(200),$("#cs-info-panel").fadeOut(200),setTimeout(function(){updatePage(),$("#special-panel").fadeIn(200),$("#name").focus(),$(".special-hoverable:first").addClass("special-hover"),loadFOB("Special","Name"),$("#special-info-description").html(sid.Name)},200)}),$(document).on("click","#level-up-button",function(){$(this).hasClass("button-disabled")||(initializeLevelUp(),pPerkChartViewMode=1,$("#level-up-perks-dialog").dialog("open"))}),$(document).on("click","#spend-perks-button",function(){$(this).hasClass("button-disabled")||(pPerkChartViewMode=2,$("#level-up-perks-dialog").dialog("open"))}),$("#cs-perks-content").slimScroll({position:"left",height:"290px",alwaysVisible:!0,color:"#57CC86",opacity:"0.85",wheelStep:100,allowPageScroll:!1,railVisible:!0,railColor:"green"}),$(document).on("click","#perk-chart-button",function(){pPerkChartViewMode=0,$("#level-up-perks-dialog").dialog("open")}),$(document).on("click","#undo-button",function(){if(!$(this).hasClass("button-disabled")){var e=pEventLog[pEventLog.length-1],a=e[0],t=e[1],o=(e[2],e[3]);e[4],e[5];if("b"==t)pLevelData[pLevel].Books.splice($.inArray(o,pLevelData[pLevel].Books),1),$("#event-log-content").find(".event:last").remove(),pRedoStack.push(pEventLog.pop());else if("h"==t)pLevelData[pLevel].Bobbleheads.splice($.inArray(o,pLevelData[pLevel].Bobbleheads),1),$("#event-log-content").find(".event:last").remove(),pRedoStack.push(pEventLog.pop());else if("l-perk"==t||"l-perk-saved"==t){var n="l-perk-saved"!=t&&pEventLog.length-2>=0&&"l"!=pEventLog[pEventLog.length-2][1];if(n)pLevelData[pLevel].Perks.pop(),pRedoStack.push(pEventLog.pop()),$("#event-log-content").find(".event:last").remove();else{for(delete pLevelData[pLevel];;){var r=$("#event-log-content").find(".event:last"),s=r.find(".event-type").first().data("reference"),i=r.data("level");if(pLevel!=i||"l"!=s&&!s.match("^l-")){r.hasClass("event-spacer")&&r.remove();break}r.remove()}for(;;){var t=pEventLog[pEventLog.length-1][1],a=pEventLog[pEventLog.length-1][0];if(pLevel!=a||"l"!=t&&!t.match("^l-"))break;pRedoStack.push(pEventLog.pop())}pLevel--}}updatePage()}}),$("#name-change-dialog").dialog({resizable:!1,height:180,minWidth:445,modal:!0,autoOpen:!1,buttons:{OK:function(){$("#name").val($("#name-change-input").val());var e=$("#name-change-input").val().toUpperCase();$("#cs-legend").html(e+" (LEVEL "+pLevel+") <img src='img/fo4-gender-"+pGender+".png' style='height:17px;position:relative;top:3px;'>"),$("#event-log-heading").html(e),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}}),$(document).on("click","#cs-legend",function(e){$("#name-change-input").val($("#name").val()),$("#name-change-dialog").dialog("open")}),$(document).on("mouseenter","#name-change",function(){$("#name-change-input").focus(),$("#name-change-input").selectRange($("#name-change-input").val().length)}),$(document).on("mouseleave","#name-change",function(){$("#name-change-input").blur()}),$("#cs-legend").tooltip({tooltipClass:"cs-legend-tooltip",track:!1,show:{delay:0},position:{my:"left+15 center",at:"right center"}}),$(document).on("click","#redo-button",function(){$(this).hasClass("button-disabled")||redoEvent()});for(var i in bid)$("#books").append("<DIV class='book' id=\""+i+"\"><DIV class='book-pip'></DIV><DIV class='book-label'>"+i+"</DIV></DIV>");$("#books-dialog").dialog({resizable:!1,height:490,minWidth:620,modal:!0,autoOpen:!1,show:"fade",open:function(){$(".book-hover").removeClass("book-hover"),$(".book-selected").removeClass("book-selected"),$(".book-unavailable").removeClass("book-unavailable");var e=!1;for(var a in pLevelData){var t=pLevelData[a].Books;for(i in t)if(strStartsWith(t[i],"You're S.P.E.C.I.A.L.")){e=!0;break}if(e)break}var o="";if($(".book").each(function(){var a=$(this).attr("id"),t=getPlayerBooksRead(a),n=bid[a][0];t==n&&$(this).addClass("book-unavailable"),strStartsWith(a,"You're S.P.E.C.I.A.L.")&&e&&$(this).addClass("book-unavailable"),0==o.length&&(o=a)}),o.length>0){$("#"+o).addClass("book-hover"),$("#books-info-description-scroll").html(bid[o][1]);for(var n=getPlayerBooksRead(o),r=bid[o][0],s="",l=!0,d=0;r>d;d++)n>d?s+="<img data-idx='"+String(d+1)+"' class='book-star-filled' src='img/fo4-star-filled.png'/>":l?(s+="<DIV class='star-fill-animation book-star-empty' data-idx='"+String(d+1)+"'><img class='bottom' src='img/fo4-star-empty.png'/><img class='top' src='img/fo4-star-filled.png'/></DIV>",l=!1):s+="<img data-idx='"+String(d+1)+"' class='book-star-empty' src='img/fo4-star-empty.png'/>";$("#books-stars").html(s),loadFOB("Book",o)}$("#book-button-ok").button("disable")},beforeClose:function(){$(".ui-widget-overlay").fadeOut(250)},buttons:[{id:"book-button-ok",text:"OK",click:function(){var e=$("#books-dialog").find(".book-selected:first").parent().attr("id");pLevelData[pLevel].Books.push(e);var a=getPlayerBooksRead(e),t=bid[e][0];addLogEntry(pLevel,"b",[e],"BOOK:",e,a,t),pRedoStack=[],updatePage(),$("#books-dialog").dialog("option","hide","fade").dialog("close")}},{id:"book-button-cancel",text:"Cancel",click:function(){$("#books-dialog").dialog("option","hide","fade").dialog("close")}}]}),$("#cs-books-content").slimScroll({position:"left",height:"289px",alwaysVisible:!0,color:"#57CC86",opacity:"0.85",wheelStep:100,allowPageScroll:!1,railVisible:!0,railColor:"green"}),$("#books-info-description-scroll").slimScroll({position:"right",width:"315px",height:"180px",alwaysVisible:!0,color:"#57CC86",opacity:"0.85",wheelStep:100,allowPageScroll:!1,railVisible:!0,railColor:"green"}),$("#cs-books-description-scroll").slimScroll({position:"right",width:"260px",height:"115px",alwaysVisible:!0,color:"#57CC86",opacity:"0.85",wheelStep:100,allowPageScroll:!1,railVisible:!0,railColor:"green"}),$(document).on("click","#read-book-button",function(){$("#books-dialog").dialog("open")}),$(document).on("mouseenter",".book",function(){$(".book-hover").removeClass("book-hover"),$(this).addClass("book-hover");var e=$(this).attr("id");$("#books-info-description-scroll").html(bid[e][1]);for(var a=getPlayerBooksRead(e),t=bid[e][0],o="",n=!0,r=0;t>r;r++)a>r?o+="<img data-idx='"+String(r+1)+"' class='book-star-filled' src='img/fo4-star-filled.png'/>":n?(o+=$(this).find(".book-pip:first").hasClass("book-selected")?"<img data-idx='"+String(r+1)+"' class='book-star-filled' src='img/fo4-star-filled.png'/>":0==$(".book-selected").length?"<DIV class='star-fill-animation book-star-empty' data-idx='"+String(r+1)+"'><img class='bottom' src='img/fo4-star-empty.png'/><img class='top' src='img/fo4-star-filled.png'/></DIV>":"<img data-idx='"+String(r+1)+"' class='book-star-empty' src='img/fo4-star-empty.png'/>",n=!1):o+="<img data-idx='"+String(r+1)+"' class='book-star-empty' src='img/fo4-star-empty.png'/>";$("#books-stars").html(o),loadFOB("Book",$(this).attr("id"))}),$(document).on("click",".book:not(.book-unavailable)",function(){$(this).find(".book-pip").hasClass("book-selected")?($(this).find(".book-pip").first().removeClass("book-selected"),$("#book-button-ok").button("disable")):($(".book-selected").removeClass("book-selected"),$(this).find(".book-pip").first().addClass("book-selected"),$("#book-button-ok").button("enable"));for(var e=$(this).attr("id"),a=getPlayerBooksRead(e),t=bid[e][0],o="",n=!0,r=0;t>r;r++)a>r?o+="<img data-idx='"+String(r+1)+"' class='book-star-filled' src='img/fo4-star-filled.png'/>":n?(o+=$(this).find(".book-pip:first").hasClass("book-selected")?"<img data-idx='"+String(r+1)+"' class='book-star-filled' src='img/fo4-star-filled.png'/>":"<DIV class='star-fill-animation book-star-empty' data-idx='"+String(r+1)+"'><img class='bottom' src='img/fo4-star-empty.png'/><img class='top' src='img/fo4-star-filled.png'/></DIV>",n=!1):o+="<img data-idx='"+String(r+1)+"' class='book-star-empty' src='img/fo4-star-empty.png'/>";$("#books-stars").html(o)});for(var l in hid)$("#bobbleheads").append("<DIV class='bobblehead' id=\""+l+"\"><DIV class='bobblehead-pip'></DIV><DIV class='bobblehead-label'>"+l+"</DIV></DIV>");$("#bobbleheads-dialog").dialog({resizable:!1,height:490,minWidth:570,modal:!0,autoOpen:!1,show:"fade",open:function(){$(".bobblehead-hover").removeClass("bobblehead-hover"),$(".bobblehead-selected").removeClass("bobblehead-selected");var e="";if($(".bobblehead").each(function(){var a=$(this).attr("id");getPlayerHasBobblehead(a)&&$(this).addClass("bobblehead-unavailable"),0==e.length&&(e=a)}),e.length>0){$("#"+e).addClass("bobblehead-hover");var a=hid[e][0]+"<BR><BR>"+hid[e][1];$("#bobbleheads-info-description").html(a),loadFOB("Bobblehead",e)}$("#bobblehead-button-ok").button("disable")},beforeClose:function(){$(".ui-widget-overlay").fadeOut(250)},buttons:[{id:"bobblehead-button-ok",text:"OK",click:function(){var e=$("#bobbleheads-dialog").find(".bobblehead-selected:first").parent().attr("id");pLevelData[pLevel].Bobbleheads.push(e),addLogEntry(pLevel,"h",[e],"BOBBLEHEAD:",e,getPlayerHasBobblehead(e)?1:0,1),pRedoStack=[],updatePage(),$("#bobbleheads-dialog").dialog("option","hide","fade").dialog("close")}},{id:"bobblehead-button-cancel",text:"Cancel",click:function(){$("#bobbleheads-dialog").dialog("option","hide","fade").dialog("close")}}]}),$("#cs-bobbleheads-content").slimScroll({position:"left",height:"289px",alwaysVisible:!0,color:"#57CC86",opacity:"0.85",wheelStep:100,allowPageScroll:!1,railVisible:!0,railColor:"green"}),$("#books").slimScroll({position:"left",height:"455px",alwaysVisible:!0,color:"#57CC86",opacity:"0.85",wheelStep:100,allowPageScroll:!1,railVisible:!0,railColor:"green"}),$("#bobbleheads").slimScroll({position:"left",height:"425px",alwaysVisible:!0,color:"#57CC86",opacity:"0.85",wheelStep:100,allowPageScroll:!1,railVisible:!0,railColor:"green"}),$(document).on("click","#add-bobblehead-button",function(){$("#bobbleheads-dialog").dialog("open")}),$(document).on("mouseenter",".bobblehead",function(){$(".bobblehead-hover").removeClass("bobblehead-hover"),$(this).addClass("bobblehead-hover");var e=$(this).attr("id"),a=hid[e][0]+"<BR><BR>"+hid[e][1];$("#bobbleheads-info-description").html(a),loadFOB("Bobblehead",$(this).attr("id"))}),$(document).on("click",".bobblehead:not(.bobblehead-unavailable)",function(){$(this).find(".bobblehead-pip").hasClass("bobblehead-selected")?($(this).find(".bobblehead-pip").first().removeClass("bobblehead-selected"),$("#bobblehead-button-ok").button("disable")):($(".bobblehead-selected").removeClass("bobblehead-selected"),$(this).find(".bobblehead-pip").first().addClass("bobblehead-selected"),$("#bobblehead-button-ok").button("enable"))}),$(document).on("click",".event-detail-value",function(){var e=$(this).find(".event-detail-description:first").html();e=e.replace("&amp;","&");var a=$(this).parent().parent().find(".event-type:first").data("reference");if("h"==a){$("#cs-tabs").tabs("option","active",$('#cs-tabs a[href="#cs-tab-bobbleheads"]').parent().index()),$("div.cs-hoverable[data-type='Bobblehead']").toggleClass("cs-hoverable-hover",!1),$("div.cs-hoverable[data-type='Bobblehead'][data-reference=\""+e+'"]').toggleClass("cs-hoverable-hover",!0),loadFOB("CharacterSheet",e,"Bobblehead");var t=hid[e][0];t+="<BR><BR>"+hid[e][1],$("#cs-bobbleheads-description").html(t);var o=$("div.cs-hoverable[data-type='Bobblehead'][data-reference=\""+e+'"]').index();if(10>=o)$("#cs-bobbleheads-content").slimScroll({scrollTo:"0px"});else{var n=$('.cs-hoverable[data-type="Bobblehead"][data-reference="'+e+'"]').position().top+"px";$("#cs-bobbleheads-content").slimScroll({scrollTo:n})}}else if("b"==a){$("#cs-tabs").tabs("option","active",$('#cs-tabs a[href="#cs-tab-books"]').parent().index()),$("div.cs-hoverable[data-type='Book']").toggleClass("cs-hoverable-hover",!1),$("div.cs-hoverable[data-type='Book'][data-reference=\""+e+'"]').toggleClass("cs-hoverable-hover",!0),$("#cs-books-description-scroll").html(bid[e][1]),loadFOB("CharacterSheet",e,"Book");for(var r=getPlayerBooksRead(e),s=bid[e][0],i="",l=!0,d=0;s>d;d++)r>d?i+="<img data-idx='"+String(d+1)+"' class='book-star-filled' src='img/fo4-star-filled.png'/>":l&&(i+="<img data-idx='"+String(d+1)+"' class='book-star-empty' src='img/fo4-star-empty.png'/>");$("#cs-books-stars").html(i);var o=$("div.cs-hoverable[data-type='Book'][data-reference=\""+e+'"]').index();if(10>=o)$("#cs-books-content").slimScroll({scrollTo:"0px"});else{var n=$('.cs-hoverable[data-type="Book"][data-reference="'+e+'"]').position().top+"px";$("#cs-books-content").slimScroll({scrollTo:n})}}else if("l-perk"==a){$("#cs-tabs").tabs("option","active",$('#cs-tabs a[href="#cs-tab-perks"]').parent().index()),$("div.cs-hoverable[data-type='Perk']").toggleClass("cs-hoverable-hover",!1),$("div.cs-hoverable[data-type='Perk'][data-reference=\""+e+'"]').toggleClass("cs-hoverable-hover",!0),loadFOB("CharacterSheet",e,"Perk");var c=-1!=$.inArray(e,specialKeys)?sid[e]:pid[e][3][getPlayerPerkRank(e)-1];$("#cs-perks-description").html(c);var o=$("div.cs-hoverable[data-type='Perk'][data-reference=\""+e+'"]').index();if(10>=o)$("#cs-perks-content").slimScroll({scrollTo:"0px"});else{var n=$('.cs-hoverable[data-type="Perk"][data-reference="'+e+'"]').position().top+"px";$("#cs-perks-content").slimScroll({scrollTo:n})}}else"c-special"==a?$("#cs-tabs").tabs("option","active",$('#cs-tabs a[href="#cs-tab-player"]').parent().index()):"c-gender"==a&&$("#cs-tabs").tabs("option","active",$('#cs-tabs a[href="#cs-tab-player"]').parent().index())}),$(document).on("mouseleave",".ds-content-entry",function(){$(this).removeClass("ds-entry-hover"),$(this).data("ui-tooltip")&&($(this).tooltip("destroy"),$(this).attr("title",""))}),$(document).on("mouseenter",".ds-content-entry",function(){$(this).addClass("ds-entry-hover");var e=$(this).data("reference"),a=$(this).find(".ds-content-entry-label:first").html(),t=$(this).find(".ds-content-entry-value:first").html(),o=getSPECIAL(0),n=(getSPECIAL(1),getSPECIAL(2)),r=(getSPECIAL(3),getSPECIAL(4),getSPECIAL(5)),s=(getSPECIAL(6),"<DIV class='ds-tooltip-line'><DIV class='ds-tooltip-label ds-tooltip-title'>"+a+"</DIV><DIV class='ds-tooltip-value ds-tooltip-title'>"+t+"</DIV></DIV><BR><DIV class='ds-tooltip-line'><DIV class='ds-tooltip-hr'></DIV></DIV>"),i="",l="",d="",c="",p="",h=[],g=[],u="";if("AP"==e)i=String(60+10*r),l="Astoundingly Awesome Tales",d=getPlayerBooksRead("Astoundingly Awesome Tales")>0?5:0;else if("AE"==e)h[0]="Action Boy",g[0]=25*getPlayerPerkRank("Action Boy")+"%";else if("HP"==e)i=String(80+5*n),u=pLevel>1?String(10*(pLevel-1)):"",h[0]="Life Giver",g[0]=20*getPlayerPerkRank("Life Giver");else if("CW"==e)i=200+10*o+" lbs.",h[0]="Strong Back",g[0]=25*(getPlayerPerkRank("Strong Back")>2?2:getPlayerPerkRank("Strong Back"))+" lbs.",h[1]="Lone Wanderer",g[1]=50*(getPlayerPerkRank("Lone Wanderer")>2?2:getPlayerPerkRank("Lone Wanderer"))+" lbs.";else if("HR"==e)l="Astoundingly Awesome Tales",d=getPlayerBooksRead("Astoundingly Awesome Tales")>0?1:0,h[0]="Life Giver",g[0]=3==getPlayerPerkRank("Life Giver")?1:0;else if("DA"==e)l="Unstoppables",d=getPlayerBooksRead("Unstoppables")+"%";else if("DR"==e){h[0]="Rooted",g[0]=25*(getPlayerPerkRank("Rooted")>2?2:getPlayerPerkRank("Rooted"))+"%",h[1]="Toughness",g[1]=10*getPlayerPerkRank("Toughness")+"%",h[2]="Lone Wanderer";var k=getPlayerPerkRank("Lone Wanderer");1==k?g[2]="15%":k>=2?g[2]="20%":g[2]="0%"}else if("PR"==e)l="Astoundingly Awesome Tales",d=(getPlayerBooksRead("Astoundingly Awesome Tales")>0?5:0)+"%";else if("RR"==e)l="Astoundingly Awesome Tales",d=(getPlayerBooksRead("Astoundingly Awesome Tales")>0?5:0)+"%",h[0]="Rad Resistant",g[0]=10*getPlayerPerkRank("Rad Resistant")+"%";else if("ER"==e)h[0]="Refractor",g[0]=10*getPlayerPerkRank("Refractor")+"%";else if("AR"==e)h[0]="Chem Resistant",g[0]=50*getPlayerPerkRank("Chem Resistant")+"%";else if("SH"==e)c="Medicine",p=(getPlayerHasBobblehead("Medicine")?10:0)+"%";else if("LL"==e)h[0]="Locksmith",g[0]=t;else if("TL"==e)h[0]="Hacker",g[0]=t;else if("GM"==e)h[0]="Gun Nut",g[0]=0==getPlayerPerkRank("Gun Nut")?"Base":getPlayerPerkRank("Gun Nut");else if("AM"==e)h[0]="Armorer",g[0]=0==getPlayerPerkRank("Armorer")?"Base":getPlayerPerkRank("Armorer");else if("HM"==e)h[0]="Science",g[0]=0==getPlayerPerkRank("Science")?"Base":getPlayerPerkRank("Science");else if("MM"==e)h[0]="Blacksmith",g[0]=0==getPlayerPerkRank("Blacksmith")?"Base":getPlayerPerkRank("Blacksmith");else if("PP"==e)h[0]="Pickpocket",g[0]=25*getPlayerPerkRank("Pickpocket")+"%";else if("BP"==e)l="Tales of a Junktown Jerky Vendor",d=5*getPlayerBooksRead("Tales of a Junktown Jerky Vendor")+"%",c="Barter",p=(getPlayerHasBobblehead("Barter")?5:0)+"%",h[0]="Cap Collector",g[0]=25*(getPlayerPerkRank("Cap Collector")>2?2:getPlayerPerkRank("Cap Collector"))+"%";else if("LP"==e)l="Tumblers Today",
d=5*getPlayerBooksRead("Tumblers Today")+"%",c="Lockpicking",p=(getPlayerHasBobblehead("Lockpicking")?10:0)+"%";else if("FC"==e){c="Repair",p=(getPlayerHasBobblehead("Repair")?10:0)+"%",h[0]="Nuclear Physicist";var m=getPlayerPerkRank("Nuclear Physicist");switch(g[0]="0%",m){case 1:g[0]="25%";break;case 2:g[0]="50%";break;case 3:g[0]="100%"}}else"CD"==e?(h[0]="Chemist",g[0]=50*getPlayerPerkRank("Chemist")+"%"):"ED"==e?(c="Explosives",p=(getPlayerHasBobblehead("Explosives")?15:0)+"%",h[0]="Demolition Expert",g[0]=25*getPlayerPerkRank("Demolition Expert")+"%",h[1]="Lone Wanderer",g[1]=(3==getPlayerPerkRank("Lone Wanderer")?25:0)+"%",h[2]="Bloody Mess",g[2]=5*(getPlayerPerkRank("Bloody Mess")>3?3:getPlayerPerkRank("Bloody Mess"))+"%"):"MW"==e?(h[0]="Big Leagues",g[0]=20*getPlayerPerkRank("Big Leagues")+"%",h[1]="Rooted",g[1]=25*(getPlayerPerkRank("Rooted")>2?2:getPlayerPerkRank("Rooted"))+"%",h[2]="Lone Wanderer",g[2]=(3==getPlayerPerkRank("Lone Wanderer")?25:0)+"%",h[3]="Bloody Mess",g[3]=5*(getPlayerPerkRank("Bloody Mess")>3?3:getPlayerPerkRank("Bloody Mess"))+"%"):"MC"==e?(l="Grognak the Barbarian",d=5*getPlayerBooksRead("Grognak the Barbarian")+"%",c="Melee",p=(getPlayerHasBobblehead("Melee")?25:0)+"%",h[0]="Better Criticals",g[0]=50*getPlayerPerkRank("Better Criticals")+"%"):"EW"==e?(h[0]="Lone Wanderer",g[0]=(3==getPlayerPerkRank("Lone Wanderer")?25:0)+"%",h[1]="Bloody Mess",g[1]=5*(getPlayerPerkRank("Bloody Mess")>3?3:getPlayerPerkRank("Bloody Mess"))+"%"):"EC"==e?(l="Tesla Science Magazine",d=5*getPlayerBooksRead("Tesla Science Magazine")+"%",c="Energy Weapons",p=(getPlayerHasBobblehead("Energy Weapons")?25:0)+"%",h[0]="Better Criticals",g[0]=50*getPlayerPerkRank("Better Criticals")+"%"):"UW"==e?(h[0]="Iron Fist",g[0]=20*getPlayerPerkRank("Iron Fist")+"%",h[1]="Rooted",g[1]=25*(getPlayerPerkRank("Rooted")>2?2:getPlayerPerkRank("Rooted"))+"%",h[2]="Lone Wanderer",g[2]=(3==getPlayerPerkRank("Lone Wanderer")?25:0)+"%",h[3]="Bloody Mess",g[3]=5*(getPlayerPerkRank("Bloody Mess")>3?3:getPlayerPerkRank("Bloody Mess"))+"%"):"UC"==e?(l="Grognak the Barbarian",d=5*getPlayerBooksRead("Grognak the Barbarian")+"%",c="Unarmed",p=(getPlayerHasBobblehead("Unarmed")?25:0)+"%",h[0]="Better Criticals",g[0]=50*getPlayerPerkRank("Better Criticals")+"%"):"HW"==e?(h[0]="Heavy Gunner",g[0]=20*getPlayerPerkRank("Heavy Gunner")+"%",h[1]="Lone Wanderer",g[1]=(3==getPlayerPerkRank("Lone Wanderer")?25:0)+"%",h[2]="Bloody Mess",g[2]=5*(getPlayerPerkRank("Bloody Mess")>3?3:getPlayerPerkRank("Bloody Mess"))+"%"):"HC"==e?(c="Big Guns",p=(getPlayerHasBobblehead("Big Guns")?25:0)+"%",h[0]="Better Criticals",g[0]=50*getPlayerPerkRank("Better Criticals")+"%"):"PW"==e?(h[0]="Gunslinger",g[0]=20*getPlayerPerkRank("Gunslinger")+"%",h[1]="Lone Wanderer",g[1]=(3==getPlayerPerkRank("Lone Wanderer")?25:0)+"%",h[2]="Bloody Mess",g[2]=5*(getPlayerPerkRank("Bloody Mess")>3?3:getPlayerPerkRank("Bloody Mess"))+"%"):"RW"==e?(h[0]="Rifleman",g[0]=20*getPlayerPerkRank("Rifleman")+"%",h[1]="Lone Wanderer",g[1]=(3==getPlayerPerkRank("Lone Wanderer")?25:0)+"%",h[2]="Bloody Mess",g[2]=5*(getPlayerPerkRank("Bloody Mess")>3?3:getPlayerPerkRank("Bloody Mess"))+"%"):"AW"==e?(h[0]="Commando",g[0]=20*getPlayerPerkRank("Commando")+"%",h[1]="Lone Wanderer",g[1]=(3==getPlayerPerkRank("Lone Wanderer")?25:0)+"%",h[2]="Bloody Mess",g[2]=5*(getPlayerPerkRank("Bloody Mess")>3?3:getPlayerPerkRank("Bloody Mess"))+"%"):"BC"==e&&(l="Guns & Bullets",d=5*getPlayerBooksRead("Guns & Bullets")+"%",c="Small Guns",p=(getPlayerHasBobblehead("Small Guns")?25:0)+"%",h[0]="Better Criticals",g[0]=50*getPlayerPerkRank("Better Criticals")+"%");var b="";if(i.length>0&&(s+="<DIV class='ds-tooltip-line'><DIV class='ds-tooltip-label'>Base</DIV><DIV class='cs-special-tooltip-value'>"+i+"</DIV></DIV>",b="<BR>"),u.length>0&&(s+=b+"<DIV class='ds-tooltip-line'><DIV class='ds-tooltip-label'>Level</DIV><DIV class='ds-tooltip-value'>"+u+"</DIV></DIV>",b="<BR>"),l.length>0&&(s+=b+"<DIV class='ds-tooltip-line'><DIV class='ds-tooltip-label'>Book: "+l+"</DIV><DIV class='ds-tooltip-value'>"+d+"</DIV></DIV>",b="<BR>"),c.length>0&&(s+=b+"<DIV class='ds-tooltip-line'><DIV class='ds-tooltip-label'>Bobblehead: "+c+"</DIV><DIV class='ds-tooltip-value'>"+p+"</DIV></DIV>",b="<BR>"),h.length>0)for(var v=0;v<h.length;v++){var y=h[v],f=g[v];s+=b+"<DIV class='ds-tooltip-line'><DIV class='ds-tooltip-label'>Perk: "+y+"</DIV><DIV class='ds-tooltip-value'>"+f+"</DIV></DIV>",b="<BR>"}$(this).attr("title",""),$(this).data("ui-tooltip")||($(this).tooltip({content:function(){return s},tooltipClass:"ds-tooltip",track:!1,show:!1,position:{my:"left bottom-25",at:"left-40 center"},open:function(e,a){setTimeout(function(){$(a.tooltip).hide(200)},6e3)}}),$(this).tooltip("open"))}),$(document).on("click","#export-button",function(){if(!$(this).hasClass("button-disabled")){var e="c=";e+="Male"==pGender?0:1;for(var a=0;a<pSPECIAL.length;a++)e+=pSPECIAL[a].toString(16);if(e+=$("#name").val(),pLevelData[1].Books.length>0){e+="&k=";for(var t in pLevelData[1].Books){var o=getMapKeyIndex(bid,pLevelData[1].Books[t]).toString();o.length<2&&(o="0"+o),e+=o}}if(pLevelData[1].Bobbleheads.length>0){e+="&h=";for(var n in pLevelData[1].Bobbleheads){var r=getMapKeyIndex(hid,pLevelData[1].Bobbleheads[n]).toString();r.length<2&&(r="0"+r),e+=r}}var s=!0;for(var i in pLevelData)if(1!=i){s&&(s=!1,e+="&l=");var l=pLevelData[i].Perks,d=pLevelData[i].Books,c=pLevelData[i].Bobbleheads;if(i>1){e+="r";for(var p in l){var h=l[p],g="";if("perk-saved"==h)g="999";else{var u=$.inArray(h,specialKeys);if(-1!=u)g="q0"+u;else for(g=getMapKeyIndex(pid,h).toString();g.length<3;)g="0"+g}e+=g}}if(d.length>0){1==i&&(e+="&"),e+="k",1==i&&(e+="=");for(var k in d){var t=d[k];o=getMapKeyIndex(bid,t).toString(),o.length<2&&(o="0"+o),e+=o}}if(c.length>0){1==i&&(e+="&"),e+="h",1==i&&(e+="=");for(var k in c){var n=c[k];r=getMapKeyIndex(hid,n).toString(),r.length<2&&(r="0"+r),e+=r}}}var m=encodeURI(e);$("#export-dialog").dialog("open");var b="http://www.rpg-gaming.com/fo4.html?"+m,v="##["+$("#name").val()+"]("+b+")";$("#export-input-bbc").val("[URL="+b+"]"+$("#name").val()+"[/URL]"),$("#export-input-direct").val(b),$("#export-input-reddit").val(v),$("#export-input-html").val('<a href="'+b+'">'+$("#name").val()+"</a>"),$("#export-input-bbc").blur()}}),$(".export-input").on("mouseenter",function(){$(".export-input").removeClass("export-input-hover"),$(this).addClass("export-input-hover"),$(this).data("ui-tooltip")&&($(this).tooltip("destroy"),$(this).attr("title","")),$(this).attr("title","Click to copy build."),$(this).data("ui-tooltip")||$(this).tooltip({tooltipClass:"export-tooltip",track:!0,show:!1,position:{my:"left+15 center",at:"right center"}}),$(this).tooltip("open")}),$(".export-input").on("mouseleave",function(){$(".export-input").removeClass("export-input-hover"),$(".export-input").removeClass("export-input-selected"),$(this).data("ui-tooltip")&&($(this).tooltip("destroy"),$(this).attr("title",""))}),$(".export-input").on("click",function(){$(".export-input").removeClass("export-input-selected"),$(this).selectRange(0,$(this).val().length),$(this).addClass("export-input-selected"),$(this).data("ui-tooltip")&&($(this).tooltip("destroy"),$(this).attr("title","")),$(this).attr("title","Press ctrl+c to copy your build"),$(this).data("ui-tooltip")||$(this).tooltip({tooltipClass:"export-tooltip",track:!0,show:!1,position:{my:"left+15 center",at:"right center"}}),$(this).tooltip("open")}),$(".export-input").on("copy",function(){$(this).data("ui-tooltip")&&($(this).tooltip("destroy"),$(this).attr("title","")),$(this).attr("title","Build Copied!"),$(this).data("ui-tooltip")||$(this).tooltip({tooltipClass:"export-tooltip",track:!0,show:!1,position:{my:"left+15 center",at:"right center"}}),$(this).tooltip("open")}),$("#export-dialog").dialog({resizable:!1,height:330,minWidth:615,modal:!0,autoOpen:!1,buttons:{OK:function(){$(this).dialog("close")}}});var d=!1;if(getParameterByName("n").length>0){pGender="Male";for(var c=getParameterByName("a"),r=0;7>r;r++)pSPECIAL[r]=parseInt(c.substr(r,1),16);$("#name").val(getParameterByName("n")),finalizePlayerCreation(),updatePage(),d=!0}else if(getParameterByName("c").length>0){var c=getParameterByName("c");pGender="0"==c.substr(0,1)?"Male":"Female",c=c.slice(1);for(var r=0;7>r;r++)pSPECIAL[r]=parseInt(c.substr(r,1),16);$("#name").val(c.slice(7)),finalizePlayerCreation();var p=getParameterByName("o");if(p.length>0)for(var h in p){var g=parseInt(p[h],16);0==g&&(g=1);var u=getMapIndexKey(bid,g);pLevelData[1].Books.push(u);var k=getPlayerBooksRead(u),m=bid[u][0];addLogEntry(1,"b",[u],"BOOK:",u,k,m)}var b=getParameterByName("k");if(b.length>0)for(var h=0;h<b.length;h+=2){var g=parseInt(b[h].toString()+b[h+1].toString()),u=getMapIndexKey(bid,g);pLevelData[1].Books.push(u);var k=getPlayerBooksRead(u),m=bid[u][0];addLogEntry(1,"b",[u],"BOOK:",u,k,m)}var v=getParameterByName("h");if(v.length>0)for(var h=0;h<v.length;h+=2){var y=parseInt(v[h].toString()+v[h+1].toString()),f=getMapIndexKey(hid,y);pLevelData[1].Bobbleheads.push(f),addLogEntry(1,"h",[f],"BOBBLEHEAD:",f,getPlayerHasBobblehead(f)?1:0,1)}var P=getParameterByName("l");if(P.length>0){var I=!1;P.indexOf("p")>-1&&(I=!0);var L=I?P.slice(1).split("p"):P.slice(1).split("r");for(var C in L){var w=L[C];initializeLevelUp();var R={};R.Perks="",R.Books="",R.Bobbleheads="";var S="Perks",D=!1;for(var h in w)switch(w[h]){case"o":S="Books",D=!0;break;case"k":S="Books";break;case"h":S="Bobbleheads";break;default:R[S]+=w[h]}var A=R.Perks;if(A.length>0){var E="";if(void 0===pLevelData[pLevel].Perks&&(pLevelData[pLevel].Perks=[]),I){if("q"==A.substring(0,1)){var B=parseInt(A.substring(1,3));B++,E=getMapIndexKey(sid,B)}else{var B=parseInt(A.substring(0,3),10);E=getMapIndexKey(pid,B)}pLevelData[pLevel].Perks.push(E)}else for(var V=A;V.length>0;){var E="";if("q"==V.substring(0,1)){var B=parseInt(V.substring(1,3));B++,E=getMapIndexKey(sid,B)}else{var B=parseInt(V.substring(0,3),10);E=999==B?"perk-saved":getMapIndexKey(pid,B)}pLevelData[pLevel].Perks.push(E),V=V.substring(3)}}finalizeLevelUp(!0,!1,!1);var T=R.Books;if(T.length>0)if(D)for(var h in T){var g=parseInt(T[h],16);0==g&&(g=1);var u=getMapIndexKey(bid,g);pLevelData[pLevel].Books.push(u);var k=getPlayerBooksRead(u),m=bid[u][0];addLogEntry(pLevel,"b",[u],"BOOK:",u,k,m)}else for(var h=0;h<T.length;h+=2){var g=parseInt(T[h].toString()+T[h+1].toString()),u=getMapIndexKey(bid,g);pLevelData[pLevel].Books.push(u);var k=getPlayerBooksRead(u),m=bid[u][0];addLogEntry(pLevel,"b",[u],"BOOK:",u,k,m)}var x=R.Bobbleheads;if(x.length>0)for(var h=0;h<x.length;h+=2){var y=parseInt(x[h].toString()+x[h+1].toString()),f=getMapIndexKey(hid,y);pLevelData[pLevel].Bobbleheads.push(f),addLogEntry(pLevel,"h",[f],"BOBBLEHEAD:",f,getPlayerHasBobblehead(f)?1:0,1)}}}updatePage(),d=!0}else $("#name").focus();d?(setTimeout(function(){$("#page-heading").fadeIn(300)},100),setTimeout(function(){$("#character-sheet-panel").fadeIn(650)},200)):($(".special-hoverable:first").addClass("special-hover"),loadFOB("Special","Name"),$("#special-info-description").html(sid.Name),updatePage(),setTimeout(function(){$("#page-heading").fadeIn(300)},100),setTimeout(function(){$("#special-panel").fadeIn(650)},200))});